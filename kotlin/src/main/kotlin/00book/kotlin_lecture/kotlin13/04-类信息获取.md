# Kotlin åå°„ - ç±»ä¿¡æ¯è·å–

## ğŸ“– ç±»ä¿¡æ¯è·å–æ¦‚è¿°

é€šè¿‡åå°„å¯ä»¥è·å–ç±»çš„å„ç§å…ƒæ•°æ®ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ³›å‹å‚æ•°ã€çˆ¶ç±»ã€æ¥å£ã€å±æ€§ã€æ–¹æ³•ã€æ„é€ å‡½æ•°ç­‰ã€‚

---

## 1. æ³›å‹ç±»å‹å‚æ•°

### ç¤ºä¾‹ä»£ç ï¼šHelloKotlin12.kt

```kotlin
class MyTestClass<K, V> {
    var k: K? = null
    var v: V? = null
}

fun main(args: Array<String>) {
    val myTestClassType = MyTestClass::class
    println(myTestClassType.typeParameters)  
    // è¾“å‡ºï¼š[K, V]

    println(myTestClassType.typeParameters.size)  
    // è¾“å‡ºï¼š2

    println("first type: " + myTestClassType.typeParameters[0])  
    // è¾“å‡ºï¼šfirst type: K
    
    println("second type: " + myTestClassType.typeParameters[1])  
    // è¾“å‡ºï¼šsecond type: V
}
```

**çŸ¥è¯†ç‚¹ï¼š**
- `typeParameters` è·å–ç±»çš„æ³›å‹ç±»å‹å‚æ•°åˆ—è¡¨
- è¿”å›çš„æ˜¯ç±»å‹å‚æ•°çš„åç§°ï¼ˆå¦‚ Kã€Vï¼‰ï¼Œä¸æ˜¯å®é™…ç±»å‹
- å¯ä»¥é€šè¿‡ç´¢å¼•è®¿é—®å…·ä½“çš„ç±»å‹å‚æ•°

**æ‰“å°æç¤ºï¼š**
- æ³›å‹å‚æ•°åœ¨è¿è¡Œæ—¶ä¼šè¢«æ“¦é™¤ï¼Œè¿™é‡Œè·å–çš„æ˜¯å£°æ˜æ—¶çš„å‚æ•°åç§°
- æ— æ³•é€šè¿‡åå°„è·å–æ³›å‹çš„å®é™…ç±»å‹ï¼ˆå¦‚ `MyTestClass<String, Int>` ä¸­çš„ String å’Œ Intï¼‰

---

## 2. çˆ¶ç±»å’Œæ¥å£

### ç¤ºä¾‹ä»£ç ï¼šHelloKotlin13.kt

```kotlin
class MySerializable: Serializable, MyInterface

fun main(args: Array<String>) {
    val mySerializableType = MySerializable::class
    println(mySerializableType.superclasses)
    // è¾“å‡ºï¼š[interface java.io.Serializable, interface MyInterface]
}

interface MyInterface
```

**çŸ¥è¯†ç‚¹ï¼š**
- `superclasses` è·å–ç±»çš„æ‰€æœ‰çˆ¶ç±»å’Œæ¥å£
- è¿”å›ä¸€ä¸ª KClass åˆ—è¡¨
- åŒ…æ‹¬ç›´æ¥ç»§æ‰¿çš„ç±»å’Œå®ç°çš„æ¥å£

**æ³¨æ„äº‹é¡¹ï¼š**
- éœ€è¦å¯¼å…¥ `kotlin.reflect.full.superclasses`
- å¦‚æœç±»æ²¡æœ‰æ˜¾å¼ç»§æ‰¿ï¼Œä¼šåŒ…å« `Any` ç±»

---

## 3. æˆå‘˜å±æ€§åˆ—è¡¨

### ç¤ºä¾‹ä»£ç ï¼šHelloKotlin14.kt

```kotlin
class MyTestClass2(var a: String, val flag: Boolean, var age: Int) {
}

fun main(args: Array<String>) {
    val myTestClass2 = MyTestClass2::class
    println(myTestClass2.memberProperties)
    // è¾“å‡ºï¼š[var MyTestClass2.a: kotlin.String, var MyTestClass2.age: kotlin.Int, val MyTestClass2.flag: kotlin.Boolean]
}
```

**çŸ¥è¯†ç‚¹ï¼š**
- `memberProperties` è·å–ç±»çš„æ‰€æœ‰æˆå‘˜å±æ€§
- åŒ…æ‹¬ var å’Œ val å±æ€§
- è¿”å› `KProperty` å¯¹è±¡çš„é›†åˆ

**æ‰“å°æç¤ºï¼š**
- è¾“å‡ºæ˜¾ç¤ºå±æ€§çš„å¯å˜æ€§ï¼ˆvar/valï¼‰ã€æ‰€å±ç±»ã€åç§°å’Œç±»å‹
- å±æ€§æŒ‰å­—æ¯é¡ºåºæ’åˆ—

---

## 4. æˆå‘˜æ–¹æ³•åˆ—è¡¨

### ç¤ºä¾‹ä»£ç ï¼šHelloKotlin15.kt

```kotlin
class MyTestClass3 {
    fun printSomething() {
        println("something")
    }

    fun printNothing() {
        println("")
    }
}

fun main(args: Array<String>) {
    val myTestClass3 = MyTestClass3::class
    println(myTestClass3.memberFunctions)
    // è¾“å‡ºï¼šåŒ…å« printSomethingã€printNothing ä»¥åŠç»§æ‰¿è‡ª Any çš„æ–¹æ³•
}
```

**çŸ¥è¯†ç‚¹ï¼š**
- `memberFunctions` è·å–ç±»çš„æ‰€æœ‰æˆå‘˜æ–¹æ³•
- åŒ…æ‹¬è‡ªå®šä¹‰æ–¹æ³•å’Œç»§æ‰¿çš„æ–¹æ³•ï¼ˆå¦‚ toStringã€equalsã€hashCodeï¼‰
- è¿”å› `KFunction` å¯¹è±¡çš„é›†åˆ

**æ‰“å°æç¤ºï¼š**
- è¾“å‡ºä¼šåŒ…å«å¾ˆå¤šç»§æ‰¿è‡ª Any çš„æ–¹æ³•
- æ¯ä¸ªæ–¹æ³•æ˜¾ç¤ºå…¶ç­¾åä¿¡æ¯

---

## 5. æ„é€ å‡½æ•°åˆ—è¡¨

### ç¤ºä¾‹ä»£ç ï¼šHelloKotlin16.kt

```kotlin
class MyTestClass4(value: Int) {

    constructor(amount: Int, color: String): this(amount) {
        println("secondary constructor")
    }

    constructor(amount: Int, full: Boolean): this(amount) {
        println("secondary constructor")
    }

    fun printSomething() {
        println("something")
    }
}

fun main(args: Array<String>) {
    val myTestClass4 = MyTestClass4::class
    val constructors = myTestClass4.constructors

    println(constructors)
    // è¾“å‡ºï¼š[fun <init>(kotlin.Int): MyTestClass4, 
    //       fun <init>(kotlin.Int, kotlin.String): MyTestClass4, 
    //       fun <init>(kotlin.Int, kotlin.Boolean): MyTestClass4]
}
```

**çŸ¥è¯†ç‚¹ï¼š**
- `constructors` è·å–ç±»çš„æ‰€æœ‰æ„é€ å‡½æ•°
- åŒ…æ‹¬ä¸»æ„é€ å‡½æ•°å’Œæ¬¡æ„é€ å‡½æ•°
- è¿”å› `KFunction` å¯¹è±¡çš„é›†åˆ
- æ¯ä¸ªæ„é€ å‡½æ•°æ˜¾ç¤ºå…¶å‚æ•°ç±»å‹

**æ‰“å°æç¤ºï¼š**
- `<init>` æ˜¯æ„é€ å‡½æ•°çš„å†…éƒ¨åç§°
- å¯ä»¥çœ‹åˆ°ä¸‰ä¸ªæ„é€ å‡½æ•°çš„ä¸åŒå‚æ•°ç­¾å

---

## 6. Companion Objectï¼ˆä¼´ç”Ÿå¯¹è±¡ï¼‰

### ç¤ºä¾‹ä»£ç ï¼šHelloKotlin20.kt

```kotlin
class MyTestClass8 {
    companion object {
        fun method() {
            println("hello world")
        }
    }
}

fun main(args: Array<String>) {
    var myTestClass8 = MyTestClass8::class
    var companionObj = myTestClass8.companionObject

    println(companionObj)
    // è¾“å‡ºï¼šclass MyTestClass8$Companion

    MyTestClass8.method()
    // è¾“å‡ºï¼šhello world
}
```

**çŸ¥è¯†ç‚¹ï¼š**
- `companionObject` è·å–ç±»çš„ä¼´ç”Ÿå¯¹è±¡çš„ KClass
- ä¼´ç”Ÿå¯¹è±¡åœ¨ Kotlin ä¸­ç±»ä¼¼äº Java çš„é™æ€æˆå‘˜
- å¦‚æœç±»æ²¡æœ‰ä¼´ç”Ÿå¯¹è±¡ï¼Œè¿”å› null

**æ‰“å°æç¤ºï¼š**
- ä¼´ç”Ÿå¯¹è±¡çš„ç±»åæ˜¯ `ç±»å$Companion`
- å¯ä»¥é€šè¿‡ä¼´ç”Ÿå¯¹è±¡è®¿é—®å…¶ä¸­å®šä¹‰çš„æ–¹æ³•å’Œå±æ€§

---

## ğŸ’¡ æ€»ç»“

**ç±»ä¿¡æ¯è·å–çš„ä¸»è¦ APIï¼š**

| API | è¯´æ˜ | éœ€è¦å¯¼å…¥ |
|-----|------|---------|
| `typeParameters` | è·å–æ³›å‹ç±»å‹å‚æ•° | å¦ |
| `superclasses` | è·å–çˆ¶ç±»å’Œæ¥å£ | `kotlin.reflect.full.superclasses` |
| `memberProperties` | è·å–æˆå‘˜å±æ€§ | `kotlin.reflect.full.memberProperties` |
| `memberFunctions` | è·å–æˆå‘˜æ–¹æ³• | `kotlin.reflect.full.memberFunctions` |
| `constructors` | è·å–æ„é€ å‡½æ•° | å¦ |
| `companionObject` | è·å–ä¼´ç”Ÿå¯¹è±¡ | `kotlin.reflect.full.companionObject` |

**ä½¿ç”¨åœºæ™¯ï¼š**
1. æ¡†æ¶å¼€å‘ï¼ˆå¦‚åºåˆ—åŒ–ã€ä¾èµ–æ³¨å…¥ï¼‰
2. åŠ¨æ€ä»£ç†
3. å¯¹è±¡æ˜ å°„
4. æ’ä»¶ç³»ç»Ÿ
5. æµ‹è¯•å·¥å…·
