# Kotlin åå°„ - å±æ€§å¼•ç”¨

## ğŸ“– å±æ€§å¼•ç”¨æ¦‚è¿°

å±æ€§å¼•ç”¨å…è®¸æˆ‘ä»¬å°†å±æ€§ä½œä¸ºå¯¹è±¡æ¥æ“ä½œï¼Œå¯ä»¥åŠ¨æ€è·å–å’Œè®¾ç½®å±æ€§å€¼ã€‚

---

## 1. é¡¶å±‚å±æ€§å¼•ç”¨

### ç¤ºä¾‹ä»£ç ï¼šHelloKotlin5.kt

```kotlin
const val a = 3  // ä¸å¯å˜å±æ€§
var b = 5        // å¯å˜å±æ€§

fun main(args: Array<String>) {
    println(::a)          // è¾“å‡ºï¼šval a: kotlin.Int
    println(::a.get())    // è¾“å‡ºï¼š3ï¼ˆè·å–å±æ€§å€¼ï¼‰
    println(::a.name)     // è¾“å‡ºï¼šaï¼ˆè·å–å±æ€§åï¼‰

    println("----------")

    ::b.set(10)           // è®¾ç½®å±æ€§å€¼ä¸º 10
    println(b)            // è¾“å‡ºï¼š10
    println(::b.get())    // è¾“å‡ºï¼š10
}
```

**çŸ¥è¯†ç‚¹ï¼š**
- `::å±æ€§å` è·å–å±æ€§å¼•ç”¨
- ä¸å¯å˜å±æ€§ï¼ˆvalï¼‰è¿”å› `KProperty<T>` ç±»å‹ï¼Œåªæœ‰ `get()` æ–¹æ³•
- å¯å˜å±æ€§ï¼ˆvarï¼‰è¿”å› `KMutableProperty<T>` ç±»å‹ï¼Œæœ‰ `get()` å’Œ `set()` æ–¹æ³•
- å¯ä»¥é€šè¿‡ `name` å±æ€§è·å–å±æ€§åç§°

**æ‰“å°æç¤ºï¼š**
- `::a` æ‰“å°å±æ€§çš„å®Œæ•´ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç±»å‹
- `::a.get()` è·å–å±æ€§çš„å®é™…å€¼
- `::b.set(10)` ä¿®æ”¹å¯å˜å±æ€§çš„å€¼

---

## 2. ç±»æˆå‘˜å±æ€§å¼•ç”¨

### ç¤ºä¾‹ä»£ç ï¼šHelloKotlin6.kt

```kotlin
fun main(args: Array<String>) {
    val values = listOf("a", "abc", "abcd")
    println(values.map(String::length))  // è¾“å‡ºï¼š[1, 3, 4]

    println("--------")

    val x = MyClass::x
    println(x.get(MyClass(10)))  // è¾“å‡ºï¼š10ï¼ˆéœ€è¦ä¼ å…¥å¯¹è±¡å®ä¾‹ï¼‰
}

class MyClass(val x: Int)
```

**çŸ¥è¯†ç‚¹ï¼š**
- è®¿é—®ç±»çš„æˆå‘˜å±æ€§éœ€è¦ä½¿ç”¨ `ç±»å::å±æ€§å`
- è°ƒç”¨ `get()` æ—¶éœ€è¦ä¼ å…¥å¯¹è±¡å®ä¾‹
- `String::length` å¯ä»¥ç›´æ¥ç”¨äº map ç­‰é«˜é˜¶å‡½æ•°

**åº”ç”¨åœºæ™¯ï¼š**
- åœ¨é›†åˆæ“ä½œä¸­å¼•ç”¨å±æ€§
- åŠ¨æ€è®¿é—®å¯¹è±¡å±æ€§
- å±æ€§æ˜ å°„å’Œè½¬æ¢

---

## 3. æ‰©å±•å±æ€§å¼•ç”¨

### ç¤ºä¾‹ä»£ç ï¼šHelloKotlin7.kt

```kotlin
// å®šä¹‰æ‰©å±•å±æ€§
val String.firstChar: Char
    get() = this[0]

fun main(args: Array<String>) {
    println(String::firstChar.get("xyz"))  // è¾“å‡ºï¼šx
}
```

**çŸ¥è¯†ç‚¹ï¼š**
- æ‰©å±•å±æ€§ä¹Ÿå¯ä»¥é€šè¿‡ `::` å¼•ç”¨
- è°ƒç”¨æ—¶éœ€è¦ä¼ å…¥æ¥æ”¶è€…å¯¹è±¡ï¼ˆè¿™é‡Œæ˜¯å­—ç¬¦ä¸² "xyz"ï¼‰
- æ‰©å±•å±æ€§ä¸èƒ½æœ‰å¹•åå­—æ®µï¼Œåªèƒ½é€šè¿‡ getter è®¡ç®—

---

## 4. é¡¶å±‚å±æ€§çš„è¯¦ç»†æ“ä½œ

### ç¤ºä¾‹ä»£ç ï¼šHelloKotlin25.kt

```kotlin
class MyTestClass13 {
    var name: String = "Spark"
    val price = 20.3
}

var test = "test"

fun main(args: Array<String>) {
    // æ“ä½œé¡¶å±‚å±æ€§
    val topProp = ::test
    topProp.set("ä¿®æ”¹åçš„å€¼")
    println(topProp.get())  // è¾“å‡ºï¼šä¿®æ”¹åçš„å€¼
    println(test)           // è¾“å‡ºï¼šä¿®æ”¹åçš„å€¼

    // æ“ä½œç±»æˆå‘˜å±æ€§
    val myTestClass13 = MyTestClass13()
    var name = MyTestClass13::name
    name.set(myTestClass13, "Ruby")
    println(name.get(myTestClass13))  // è¾“å‡ºï¼šRuby

    // è®¿é—®åªè¯»å±æ€§
    val prop = MyTestClass13::price
    println(prop.get(myTestClass13))  // è¾“å‡ºï¼š20.3
}
```

**çŸ¥è¯†ç‚¹ï¼š**
- é¡¶å±‚å±æ€§å¼•ç”¨ä¸éœ€è¦ä¼ å…¥å¯¹è±¡å®ä¾‹
- ç±»æˆå‘˜å±æ€§å¼•ç”¨éœ€è¦ä¼ å…¥å¯¹è±¡å®ä¾‹
- åªè¯»å±æ€§ï¼ˆvalï¼‰åªèƒ½è°ƒç”¨ `get()`
- å¯å˜å±æ€§ï¼ˆvarï¼‰å¯ä»¥è°ƒç”¨ `get()` å’Œ `set()`

**æ‰“å°æç¤ºï¼š**
- ä¿®æ”¹é¡¶å±‚å±æ€§åï¼Œç›´æ¥è®¿é—®å˜é‡ä¹Ÿä¼šçœ‹åˆ°ä¿®æ”¹åçš„å€¼
- ç±»æˆå‘˜å±æ€§çš„ `set()` éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼šå¯¹è±¡å®ä¾‹å’Œæ–°å€¼

---

## 5. å±æ€§çš„ Java äº’æ“ä½œ

### ç¤ºä¾‹ä»£ç ï¼šHelloKotlin26.kt

```kotlin
class MyTestClass14 {
    var name = "Java"
    val price = 22.3
}

var myTest = "myTest"

fun main(args: Array<String>) {
    // é¡¶å±‚å±æ€§çš„ Java æ˜ å°„
    val topProp = ::myTest
    println(topProp.javaField)   // è¾“å‡ºï¼šprivate static java.lang.String ...
    println(topProp.javaGetter)  // è¾“å‡ºï¼špublic static final java.lang.String getMyTest()
    println(topProp.javaSetter)  // è¾“å‡ºï¼špublic static final void setMyTest(java.lang.String)

    // ç±»æˆå‘˜å±æ€§çš„ Java æ˜ å°„
    val n = MyTestClass14::name
    println(n.javaField)   // è¾“å‡ºï¼šprivate java.lang.String MyTestClass14.name
    println(n.javaGetter)  // è¾“å‡ºï¼špublic final java.lang.String getName()
    println(n.javaSetter)  // è¾“å‡ºï¼špublic final void setName(java.lang.String)

    // åªè¯»å±æ€§æ²¡æœ‰ setter
    val prop = MyTestClass14::price
    println(prop.javaField)   // è¾“å‡ºï¼šprivate final double MyTestClass14.price
    println(prop.javaGetter)  // è¾“å‡ºï¼špublic final double getPrice()
}
```

**çŸ¥è¯†ç‚¹ï¼š**
- `javaField` è·å–å¯¹åº”çš„ Java å­—æ®µ
- `javaGetter` è·å–å¯¹åº”çš„ Java getter æ–¹æ³•
- `javaSetter` è·å–å¯¹åº”çš„ Java setter æ–¹æ³•ï¼ˆåªæœ‰ var å±æ€§æ‰æœ‰ï¼‰
- Kotlin å±æ€§åœ¨ Java ä¸­ä¼šè‡ªåŠ¨ç”Ÿæˆå­—æ®µå’Œè®¿é—®å™¨æ–¹æ³•

**Java æ˜ å°„è§„åˆ™ï¼š**
- Kotlin çš„ `var name` ç”Ÿæˆï¼šç§æœ‰å­—æ®µ + public getter + public setter
- Kotlin çš„ `val price` ç”Ÿæˆï¼šç§æœ‰ final å­—æ®µ + public getter
- é¡¶å±‚å±æ€§ç”Ÿæˆé™æ€å­—æ®µå’Œé™æ€æ–¹æ³•

---

## ğŸ’¡ æ€»ç»“

1. **å±æ€§å¼•ç”¨ç±»å‹**ï¼š
   - `KProperty<T>` - åªè¯»å±æ€§
   - `KMutableProperty<T>` - å¯å˜å±æ€§

2. **å¼•ç”¨æ–¹å¼**ï¼š
   - é¡¶å±‚å±æ€§ï¼š`::å±æ€§å`
   - ç±»æˆå‘˜å±æ€§ï¼š`ç±»å::å±æ€§å`
   - æ‰©å±•å±æ€§ï¼š`ç±»å::æ‰©å±•å±æ€§å`

3. **æ“ä½œæ–¹æ³•**ï¼š
   - `get()` - è·å–å±æ€§å€¼
   - `set()` - è®¾ç½®å±æ€§å€¼ï¼ˆä»…å¯å˜å±æ€§ï¼‰
   - `name` - è·å–å±æ€§åç§°

4. **Java äº’æ“ä½œ**ï¼š
   - `javaField` - å¯¹åº”çš„ Java å­—æ®µ
   - `javaGetter` - å¯¹åº”çš„ getter æ–¹æ³•
   - `javaSetter` - å¯¹åº”çš„ setter æ–¹æ³•
