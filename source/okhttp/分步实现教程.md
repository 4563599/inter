# OkHttp åˆ†æ­¥å®ç°æ•™ç¨‹

æœ¬æ•™ç¨‹å°†ä¸€æ­¥ä¸€æ­¥æŒ‡å¯¼ä½ å®ç°ä¸€ä¸ªç®€åŒ–ç‰ˆçš„ OkHttpï¼Œæ·±å…¥ç†è§£å…¶æ ¸å¿ƒåŸç†ã€‚

---

## ğŸ¯ å­¦ä¹ è·¯çº¿å›¾

```
ç¬¬ä¸€æ­¥ï¼šç†è§£æ¶æ„
    â†“
ç¬¬äºŒæ­¥ï¼šå®ç°æ•°æ®ç±»
    â†“
ç¬¬ä¸‰æ­¥ï¼šå®ç°æ‹¦æˆªå™¨æ¨¡å¼
    â†“
ç¬¬å››æ­¥ï¼šå®ç°è¿æ¥æ± 
    â†“
ç¬¬äº”æ­¥ï¼šå®ç°ç½‘ç»œè¯·æ±‚
    â†“
ç¬¬å…­æ­¥ï¼šæµ‹è¯•å’Œä¼˜åŒ–
```

---

## ğŸ“ ç¬¬ä¸€æ­¥ï¼šç†è§£ OkHttp çš„æ¶æ„

### 1.1 æ ¸å¿ƒç»„ä»¶

**Requestï¼ˆè¯·æ±‚ï¼‰**
- ä¸å¯å˜å¯¹è±¡ï¼ŒåŒ…å« URLã€æ–¹æ³•ã€è¯·æ±‚å¤´ã€è¯·æ±‚ä½“
- ä½¿ç”¨ Builder æ¨¡å¼æ„å»º

**Responseï¼ˆå“åº”ï¼‰**
- ä¸å¯å˜å¯¹è±¡ï¼ŒåŒ…å«çŠ¶æ€ç ã€å“åº”å¤´ã€å“åº”ä½“
- ä½¿ç”¨ Builder æ¨¡å¼æ„å»º

**Callï¼ˆè°ƒç”¨ï¼‰**
- è¡¨ç¤ºä¸€ä¸ªå‡†å¤‡æ‰§è¡Œçš„è¯·æ±‚
- å¯ä»¥åŒæ­¥æ‰§è¡Œï¼ˆexecuteï¼‰æˆ–å¼‚æ­¥æ‰§è¡Œï¼ˆenqueueï¼‰
- æ¯ä¸ª Call åªèƒ½æ‰§è¡Œä¸€æ¬¡

**OkHttpClientï¼ˆå®¢æˆ·ç«¯ï¼‰**
- ç®¡ç†é…ç½®å’Œèµ„æº
- åˆ›å»º Call å¯¹è±¡
- ä½¿ç”¨ Builder æ¨¡å¼é…ç½®

### 1.2 æ ¸å¿ƒè®¾è®¡æ¨¡å¼

**è´£ä»»é“¾æ¨¡å¼ï¼ˆæ‹¦æˆªå™¨é“¾ï¼‰**
```
Application Interceptor
    â†“
Retry Interceptor
    â†“
Bridge Interceptor
    â†“
Cache Interceptor
    â†“
Connect Interceptor
    â†“
Network Interceptor
    â†“
CallServer Interceptor
```

æ¯ä¸ªæ‹¦æˆªå™¨éƒ½å¯ä»¥ï¼š
1. ä¿®æ”¹è¯·æ±‚
2. å†³å®šæ˜¯å¦ç»§ç»­æ‰§è¡Œ
3. ä¿®æ”¹å“åº”

---

## ğŸ“ ç¬¬äºŒæ­¥ï¼šå®ç°åŸºç¡€æ•°æ®ç±»

### 2.1 å®ç° Request

**æ ¸å¿ƒè¦ç‚¹ï¼š**
- ä½¿ç”¨ Builder æ¨¡å¼
- å¯¹è±¡ä¸å¯å˜ï¼ˆæ‰€æœ‰å­—æ®µéƒ½æ˜¯ finalï¼‰
- æä¾› newBuilder() æ–¹æ³•ç”¨äºä¿®æ”¹

```java
public class Request {
    private final String url;
    private final String method;
    private final Map<String, String> headers;
    private final RequestBody body;
    
    // Builder æ¨¡å¼
    public static class Builder {
        public Builder url(String url) { ... }
        public Builder method(String method, RequestBody body) { ... }
        public Builder header(String name, String value) { ... }
        public Request build() { ... }
    }
}
```

**ä¸ºä»€ä¹ˆä½¿ç”¨ä¸å¯å˜å¯¹è±¡ï¼Ÿ**
- çº¿ç¨‹å®‰å…¨
- å¯ä»¥å®‰å…¨åœ°åœ¨æ‹¦æˆªå™¨ä¹‹é—´ä¼ é€’
- é¿å…æ„å¤–ä¿®æ”¹

### 2.2 å®ç° Response

**æ ¸å¿ƒè¦ç‚¹ï¼š**
- åŒæ ·ä½¿ç”¨ Builder æ¨¡å¼
- åŒ…å«å¯¹ Request çš„å¼•ç”¨
- åŒ…å« priorResponseï¼ˆç”¨äºé‡å®šå‘ï¼‰

```java
public class Response {
    private final Request request;
    private final int code;
    private final String message;
    private final ResponseBody body;
    private final Response priorResponse;  // é‡å®šå‘é“¾
}
```

### 2.3 å®ç° RequestBody å’Œ ResponseBody

**RequestBodyï¼ˆæŠ½è±¡ç±»ï¼‰ï¼š**
```java
public abstract class RequestBody {
    public abstract String contentType();
    public abstract long contentLength();
    public abstract void writeTo(OutputStream out) throws IOException;
}
```

**ä¸ºä»€ä¹ˆæ˜¯æŠ½è±¡ç±»ï¼Ÿ**
- ä¸åŒç±»å‹çš„è¯·æ±‚ä½“æœ‰ä¸åŒçš„å®ç°
- JSONã€è¡¨å•ã€æ–‡ä»¶ç­‰
- æ”¯æŒæ‰©å±•

**ResponseBodyï¼ˆæŠ½è±¡ç±»ï¼‰ï¼š**
```java
public abstract class ResponseBody implements Closeable {
    public abstract InputStream byteStream();
    public String string() throws IOException { ... }
    public byte[] bytes() throws IOException { ... }
}
```

---

## ğŸ“ ç¬¬ä¸‰æ­¥ï¼šå®ç°æ‹¦æˆªå™¨é“¾ï¼ˆæ ¸å¿ƒï¼ï¼‰

### 3.1 ç†è§£è´£ä»»é“¾æ¨¡å¼

**ä»€ä¹ˆæ˜¯è´£ä»»é“¾æ¨¡å¼ï¼Ÿ**
- å°†è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…è§£è€¦
- å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚
- å°†è¿™äº›å¯¹è±¡è¿æˆä¸€æ¡é“¾ï¼Œæ²¿ç€é“¾ä¼ é€’è¯·æ±‚

**åœ¨ OkHttp ä¸­çš„åº”ç”¨ï¼š**
```
ç”¨æˆ·ä»£ç  â†’ æ‹¦æˆªå™¨1 â†’ æ‹¦æˆªå™¨2 â†’ ... â†’ çœŸå®ç½‘ç»œè¯·æ±‚
                â†“           â†“                    â†“
           ä¿®æ”¹è¯·æ±‚     æ·»åŠ ç¼“å­˜             å‘é€è¯·æ±‚
                â†‘           â†‘                    â†‘
ç”¨æˆ·ä»£ç  â† æ‹¦æˆªå™¨1 â† æ‹¦æˆªå™¨2 â† ... â† è¿”å›å“åº”
           ä¿®æ”¹å“åº”     è¿”å›ç¼“å­˜             è¯»å–å“åº”
```

### 3.2 å®ç° Interceptor æ¥å£

```java
public interface Interceptor {
    Response intercept(Chain chain) throws IOException;
    
    interface Chain {
        Request request();
        Response proceed(Request request) throws IOException;
    }
}
```

**æ ¸å¿ƒæ–¹æ³•ï¼š**
- `intercept(Chain chain)`: æ‹¦æˆªæ–¹æ³•ï¼Œåœ¨è¿™é‡Œå¤„ç†è¯·æ±‚/å“åº”
- `chain.proceed(request)`: ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨

### 3.3 å®ç° RealInterceptorChain

**æ ¸å¿ƒæ€æƒ³ï¼š**
```java
public class RealInterceptorChain implements Interceptor.Chain {
    private final List<Interceptor> interceptors;
    private final int index;  // å½“å‰æ‹¦æˆªå™¨ç´¢å¼•
    
    @Override
    public Response proceed(Request request) throws IOException {
        // 1. åˆ›å»ºä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨é“¾ï¼ˆindex + 1ï¼‰
        RealInterceptorChain next = new RealInterceptorChain(
            interceptors, index + 1, request, ...
        );
        
        // 2. è·å–å½“å‰æ‹¦æˆªå™¨
        Interceptor interceptor = interceptors.get(index);
        
        // 3. æ‰§è¡Œæ‹¦æˆªå™¨
        Response response = interceptor.intercept(next);
        
        return response;
    }
}
```

**é€’å½’è°ƒç”¨æµç¨‹ï¼š**
```
proceed(0) â†’ Interceptor[0].intercept()
                â†“
            proceed(1) â†’ Interceptor[1].intercept()
                            â†“
                        proceed(2) â†’ Interceptor[2].intercept()
                                        â†“
                                    è¿”å› Response
                                        â†‘
                            å¤„ç†å¹¶è¿”å› Response
                                â†‘
                    å¤„ç†å¹¶è¿”å› Response
```

### 3.4 å®ç° RealCall

```java
public class RealCall implements Call {
    @Override
    public Response execute() throws IOException {
        // æ„å»ºæ‹¦æˆªå™¨é“¾
        List<Interceptor> interceptors = new ArrayList<>();
        interceptors.addAll(client.interceptors());
        interceptors.add(new RetryAndFollowUpInterceptor());
        interceptors.add(new BridgeInterceptor());
        interceptors.add(new ConnectInterceptor());
        interceptors.add(new CallServerInterceptor());
        
        // åˆ›å»ºé“¾å¹¶æ‰§è¡Œ
        Interceptor.Chain chain = new RealInterceptorChain(
            interceptors, 0, request, ...
        );
        
        return chain.proceed(request);
    }
}
```

---

## ğŸ“ ç¬¬å››æ­¥ï¼šå®ç°å„ä¸ªæ‹¦æˆªå™¨

### 4.1 RetryAndFollowUpInterceptorï¼ˆé‡è¯•å’Œé‡å®šå‘ï¼‰

**èŒè´£ï¼š**
1. å¤„ç†è¯·æ±‚å¤±è´¥çš„é‡è¯•
2. å¤„ç† 3xx é‡å®šå‘

**æ ¸å¿ƒé€»è¾‘ï¼š**
```java
@Override
public Response intercept(Chain chain) throws IOException {
    Request request = chain.request();
    
    while (true) {
        try {
            Response response = chain.proceed(request);
            
            // æ£€æŸ¥æ˜¯å¦éœ€è¦é‡å®šå‘
            Request followUp = followUpRequest(response);
            if (followUp == null) {
                return response;  // ä¸éœ€è¦é‡å®šå‘
            }
            
            // ç»§ç»­å¤„ç†é‡å®šå‘
            request = followUp;
        } catch (IOException e) {
            // åˆ¤æ–­æ˜¯å¦éœ€è¦é‡è¯•
            if (!isRecoverable(e)) {
                throw e;
            }
            // ç»§ç»­é‡è¯•
        }
    }
}
```

**é‡å®šå‘å¤„ç†ï¼š**
- 301/302/303: æ”¹ä¸º GET è¯·æ±‚
- 307/308: ä¿æŒåŸæœ‰æ–¹æ³•
- æœ€å¤šé‡å®šå‘ 20 æ¬¡

### 4.2 BridgeInterceptorï¼ˆæ¡¥æ¥æ‹¦æˆªå™¨ï¼‰

**èŒè´£ï¼š**
è¡¥å……å¿…è¦çš„ HTTP è¯·æ±‚å¤´

**æ ¸å¿ƒé€»è¾‘ï¼š**
```java
@Override
public Response intercept(Chain chain) throws IOException {
    Request request = chain.request();
    Request.Builder builder = request.newBuilder();
    
    // è¡¥å…… Content-Type
    if (request.body() != null) {
        builder.header("Content-Type", request.body().contentType());
        builder.header("Content-Length", request.body().contentLength());
    }
    
    // è¡¥å…… Host
    builder.header("Host", getHost(request.url()));
    
    // è¡¥å…… Connection: Keep-Alive
    builder.header("Connection", "Keep-Alive");
    
    // è¡¥å…… Accept-Encoding: gzip
    builder.header("Accept-Encoding", "gzip");
    
    // è¡¥å…… User-Agent
    builder.header("User-Agent", "MyOkHttp/1.0");
    
    return chain.proceed(builder.build());
}
```

**ä¸ºä»€ä¹ˆå«"æ¡¥æ¥"ï¼Ÿ**
- è¿æ¥åº”ç”¨å±‚å’Œç½‘ç»œå±‚
- å°†åº”ç”¨å±‚çš„ Request è½¬æ¢ä¸ºç¬¦åˆ HTTP è§„èŒƒçš„è¯·æ±‚

### 4.3 ConnectInterceptorï¼ˆè¿æ¥æ‹¦æˆªå™¨ï¼‰

**èŒè´£ï¼š**
1. ä»è¿æ¥æ± è·å–å¯å¤ç”¨çš„è¿æ¥
2. å¦‚æœæ²¡æœ‰ï¼Œåˆ›å»ºæ–°è¿æ¥

**æ ¸å¿ƒé€»è¾‘ï¼š**
```java
@Override
public Response intercept(Chain chain) throws IOException {
    Request request = chain.request();
    
    // è§£æ host å’Œ port
    String host = getHost(request.url());
    int port = getPort(request.url());
    
    // ä»è¿æ¥æ± è·å–è¿æ¥
    RealConnection connection = connectionPool.get(host, port);
    
    if (connection == null) {
        // åˆ›å»ºæ–°è¿æ¥
        connection = new RealConnection(host, port);
        connection.connect(connectTimeout, readTimeout);
    }
    
    try {
        // æ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨
        Response response = chain.proceed(request);
        
        // ä½¿ç”¨å®Œæ¯•ï¼Œæ”¾å›è¿æ¥æ± 
        connectionPool.put(connection);
        
        return response;
    } catch (IOException e) {
        connection.close();
        throw e;
    }
}
```

### 4.4 CallServerInterceptorï¼ˆæœåŠ¡å™¨è°ƒç”¨æ‹¦æˆªå™¨ï¼‰

**èŒè´£ï¼š**
æ‰§è¡ŒçœŸå®çš„ç½‘ç»œ I/O

**æ ¸å¿ƒé€»è¾‘ï¼š**
```java
@Override
public Response intercept(Chain chain) throws IOException {
    Request request = chain.request();
    RealConnection connection = getConnection(chain);
    
    // 1. å†™å…¥è¯·æ±‚
    writeRequest(connection, request);
    
    // 2. è¯»å–å“åº”
    Response response = readResponse(connection, request);
    
    return response;
}
```

**å†™å…¥è¯·æ±‚ï¼š**
```
GET /path HTTP/1.1
Host: example.com
User-Agent: MyOkHttp/1.0
Connection: Keep-Alive

[è¯·æ±‚ä½“]
```

**è¯»å–å“åº”ï¼š**
```
HTTP/1.1 200 OK
Content-Type: text/html
Content-Length: 123

[å“åº”ä½“]
```

---

## ğŸ“ ç¬¬äº”æ­¥ï¼šå®ç°è¿æ¥æ± 

### 5.1 ä¸ºä»€ä¹ˆéœ€è¦è¿æ¥æ± ï¼Ÿ

**TCP è¿æ¥çš„å¼€é”€ï¼š**
1. ä¸‰æ¬¡æ¡æ‰‹ï¼ˆå»ºç«‹è¿æ¥ï¼‰
2. TLS æ¡æ‰‹ï¼ˆHTTPSï¼‰
3. å››æ¬¡æŒ¥æ‰‹ï¼ˆå…³é—­è¿æ¥ï¼‰

**è¿æ¥å¤ç”¨çš„å¥½å¤„ï¼š**
- èŠ‚çœè¿æ¥å»ºç«‹æ—¶é—´
- å‡å°‘æœåŠ¡å™¨è´Ÿè½½
- æå‡æ€§èƒ½

### 5.2 å®ç° RealConnection

```java
public class RealConnection implements Closeable {
    private final String host;
    private final int port;
    private Socket socket;
    
    private int referenceCount = 0;  // å¼•ç”¨è®¡æ•°
    private long idleAtNanos;        // ç©ºé—²å¼€å§‹æ—¶é—´
    
    public void acquire() {
        referenceCount++;
    }
    
    public void release() {
        referenceCount--;
        if (referenceCount == 0) {
            idleAtNanos = System.nanoTime();
        }
    }
    
    public boolean isInUse() {
        return referenceCount > 0;
    }
}
```

### 5.3 å®ç° ConnectionPool

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
1. get(): è·å–å¯å¤ç”¨çš„è¿æ¥
2. put(): æ”¾å›è¿æ¥
3. cleanup(): æ¸…ç†ç©ºé—²è¿æ¥

```java
public class ConnectionPool {
    private final Deque<RealConnection> connections = new ArrayDeque<>();
    private final int maxIdleConnections = 5;
    private final long keepAliveDurationNs;
    
    public synchronized RealConnection get(String host, int port) {
        for (RealConnection connection : connections) {
            if (connection.getHost().equals(host) 
                && connection.getPort() == port
                && !connection.isClosed()) {
                connection.acquire();
                return connection;
            }
        }
        return null;
    }
    
    public synchronized void put(RealConnection connection) {
        connection.release();
        connections.add(connection);
    }
}
```

**æ¸…ç†ç­–ç•¥ï¼š**
- å®šæœŸæ£€æŸ¥ç©ºé—²è¿æ¥
- å¦‚æœç©ºé—²æ—¶é—´è¶…è¿‡ 5 åˆ†é’Ÿï¼Œå…³é—­è¿æ¥
- å¦‚æœç©ºé—²è¿æ¥æ•°è¶…è¿‡ 5 ä¸ªï¼Œå…³é—­æœ€è€çš„è¿æ¥

---

## ğŸ“ ç¬¬å…­æ­¥ï¼šå®ç°å¼‚æ­¥è¯·æ±‚

### 6.1 å®ç° Dispatcher

**èŒè´£ï¼š**
1. ç®¡ç†çº¿ç¨‹æ± 
2. æ§åˆ¶å¹¶å‘è¯·æ±‚æ•°é‡
3. ç®¡ç†ç­‰å¾…é˜Ÿåˆ—

```java
public class Dispatcher {
    private int maxRequests = 64;
    private ExecutorService executorService;
    
    private final Deque<AsyncCall> runningAsyncCalls = new ArrayDeque<>();
    private final Deque<AsyncCall> readyAsyncCalls = new ArrayDeque<>();
    
    public synchronized void enqueue(AsyncCall call) {
        if (runningAsyncCalls.size() < maxRequests) {
            runningAsyncCalls.add(call);
            executorService().execute(call);
        } else {
            readyAsyncCalls.add(call);
        }
    }
    
    public synchronized void finished(AsyncCall call) {
        runningAsyncCalls.remove(call);
        promoteAndExecute();  // ä»ç­‰å¾…é˜Ÿåˆ—ä¸­å–ä¸‹ä¸€ä¸ª
    }
}
```

### 6.2 å®ç° AsyncCall

```java
class AsyncCall implements Runnable {
    private final Callback callback;
    
    @Override
    public void run() {
        try {
            Response response = getResponseWithInterceptorChain();
            callback.onResponse(RealCall.this, response);
        } catch (IOException e) {
            callback.onFailure(RealCall.this, e);
        } finally {
            client.dispatcher().finished(this);
        }
    }
}
```

---

## ğŸ“ ç¬¬ä¸ƒæ­¥ï¼šæµ‹è¯•å’ŒéªŒè¯

### 7.1 æµ‹è¯•åŒæ­¥è¯·æ±‚

```java
OkHttpClient client = new OkHttpClient.Builder().build();

Request request = new Request.Builder()
    .url("http://httpbin.org/get")
    .get()
    .build();

Response response = client.newCall(request).execute();
System.out.println(response.body().string());
```

### 7.2 æµ‹è¯•å¼‚æ­¥è¯·æ±‚

```java
client.newCall(request).enqueue(new Callback() {
    @Override
    public void onResponse(Call call, Response response) {
        System.out.println("æˆåŠŸ: " + response.code());
    }
    
    @Override
    public void onFailure(Call call, IOException e) {
        System.out.println("å¤±è´¥: " + e.getMessage());
    }
});
```

### 7.3 æµ‹è¯•æ‹¦æˆªå™¨

```java
OkHttpClient client = new OkHttpClient.Builder()
    .addInterceptor(new LoggingInterceptor())
    .build();
```

### 7.4 æµ‹è¯•è¿æ¥æ± 

```java
// å‘é€å¤šä¸ªè¯·æ±‚åˆ°åŒä¸€æœåŠ¡å™¨
for (int i = 0; i < 5; i++) {
    Response response = client.newCall(request).execute();
    System.out.println("è¿æ¥æ•°: " + client.connectionPool().connectionCount());
}
```

---

## ğŸ“ æ ¸å¿ƒçŸ¥è¯†ç‚¹æ€»ç»“

### 1. è´£ä»»é“¾æ¨¡å¼
- æ‹¦æˆªå™¨é“¾æ˜¯ OkHttp çš„æ ¸å¿ƒ
- æ¯ä¸ªæ‹¦æˆªå™¨ä¸“æ³¨äºä¸€ä¸ªèŒè´£
- é¡ºåºå¾ˆé‡è¦

### 2. è¿æ¥æ± 
- å¤ç”¨ TCP è¿æ¥
- å¼•ç”¨è®¡æ•°ç®¡ç†
- å®šæœŸæ¸…ç†ç©ºé—²è¿æ¥

### 3. åŒæ­¥ vs å¼‚æ­¥
- execute(): é˜»å¡å½“å‰çº¿ç¨‹
- enqueue(): æäº¤åˆ°çº¿ç¨‹æ± 
- Dispatcher ç®¡ç†å¹¶å‘

### 4. Builder æ¨¡å¼
- æ„å»ºä¸å¯å˜å¯¹è±¡
- é“¾å¼è°ƒç”¨
- çµæ´»é…ç½®

### 5. HTTP åè®®
- è¯·æ±‚è¡Œã€è¯·æ±‚å¤´ã€è¯·æ±‚ä½“
- å“åº”è¡Œã€å“åº”å¤´ã€å“åº”ä½“
- Keep-Aliveã€gzip ç­‰

---

## ğŸ” ä¸çœŸå® OkHttp çš„å·®å¼‚

### æˆ‘ä»¬çš„ç®€åŒ–ç‰ˆï¼š
- åªæ”¯æŒ HTTPï¼Œä¸æ”¯æŒ HTTPS
- æ²¡æœ‰ç¼“å­˜æœºåˆ¶
- è¿æ¥æ± é€»è¾‘ç®€åŒ–
- æ²¡æœ‰ DNS è§£æ
- æ²¡æœ‰ä»£ç†æ”¯æŒ

### çœŸå® OkHttpï¼š
- å®Œæ•´çš„ HTTPS æ”¯æŒï¼ˆSSL/TLSï¼‰
- å¼ºå¤§çš„ç¼“å­˜æœºåˆ¶
- å¤æ‚çš„è¿æ¥æ± ï¼ˆæ”¯æŒ HTTP/2ã€WebSocketï¼‰
- DNS é¢„è§£æ
- ä»£ç†ã€è¯ä¹¦éªŒè¯ç­‰

---

## ğŸ“š è¿›é˜¶å­¦ä¹ å»ºè®®

1. **é˜…è¯» OkHttp æºç **
   - å¯¹æ¯”ä½ çš„å®ç°å’ŒçœŸå®å®ç°
   - å­¦ä¹ æ›´å¤šçš„ä¼˜åŒ–æŠ€å·§

2. **å®ç°ç¼“å­˜æœºåˆ¶**
   - ç†è§£ HTTP ç¼“å­˜å¤´
   - å®ç° CacheInterceptor

3. **æ”¯æŒ HTTPS**
   - å­¦ä¹  SSL/TLS
   - è¯ä¹¦éªŒè¯

4. **æ”¯æŒ HTTP/2**
   - å¤šè·¯å¤ç”¨
   - æœåŠ¡å™¨æ¨é€

5. **æ€§èƒ½ä¼˜åŒ–**
   - å‡å°‘å¯¹è±¡åˆ›å»º
   - ä¼˜åŒ–å†…å­˜ä½¿ç”¨
   - æå‡å¹¶å‘æ€§èƒ½

---

**æ­å–œä½ ï¼ä½ å·²ç»æŒæ¡äº† OkHttp çš„æ ¸å¿ƒåŸç†ï¼** ğŸ‰

