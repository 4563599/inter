# ğŸ¯ OkHttpæºç å­¦ä¹  - å®æˆ˜ç»ƒä¹ é¢˜

## è¯´æ˜
è¿™äº›ç»ƒä¹ é¢˜æŒ‰ç…§ä»æ˜“åˆ°éš¾æ’åˆ—ï¼Œå¸®åŠ©ä½ å·©å›ºå¯¹OkHttpæºç çš„ç†è§£ã€‚
æ¯é“é¢˜éƒ½åŒ…å«ï¼šé—®é¢˜æè¿°ã€éš¾åº¦ç­‰çº§ã€çŸ¥è¯†ç‚¹ã€å‚è€ƒç­”æ¡ˆã€‚

---

## ğŸ“š åŸºç¡€é¢˜ï¼ˆç†è§£æ¦‚å¿µï¼‰

### ç»ƒä¹ 1ï¼šå®ç°ä¸€ä¸ªç®€å•çš„RequestBody
**éš¾åº¦**ï¼šâ­â˜†â˜†â˜†â˜†

**ä»»åŠ¡**ï¼š
åˆ›å»ºä¸€ä¸ªStringRequestBodyç±»ï¼Œç»§æ‰¿RequestBodyï¼Œç”¨äºå‘é€å­—ç¬¦ä¸²æ•°æ®ã€‚

**è¦æ±‚**ï¼š
```java
public class StringRequestBody extends RequestBody {
    private String content;
    private String mediaType;
    
    // 1. å®ç°æ„é€ å‡½æ•°
    // 2. å®ç°contentType()æ–¹æ³•
    // 3. å®ç°writeTo()æ–¹æ³•
}
```

**æµ‹è¯•ä»£ç **ï¼š
```java
RequestBody body = new StringRequestBody("Hello World", "text/plain");
System.out.println(body.contentType());  // è¾“å‡º: text/plain

ByteArrayOutputStream out = new ByteArrayOutputStream();
body.writeTo(out);
System.out.println(new String(out.toByteArray()));  // è¾“å‡º: Hello World
```

**çŸ¥è¯†ç‚¹**ï¼š
- RequestBodyçš„ä½œç”¨
- æŠ½è±¡ç±»çš„å®ç°
- OutputStreamçš„ä½¿ç”¨

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ</summary>

```java
public class StringRequestBody extends RequestBody {
    private String content;
    private String mediaType;
    
    public StringRequestBody(String content, String mediaType) {
        this.content = content;
        this.mediaType = mediaType;
    }
    
    @Override
    public String contentType() {
        return mediaType;
    }
    
    @Override
    public void writeTo(OutputStream out) throws IOException {
        out.write(content.getBytes("UTF-8"));
    }
}
```
</details>

---

### ç»ƒä¹ 2ï¼šä½¿ç”¨Builderæ¨¡å¼åˆ›å»ºRequest
**éš¾åº¦**ï¼šâ­â­â˜†â˜†â˜†

**ä»»åŠ¡**ï¼š
ä½¿ç”¨Builderæ¨¡å¼åˆ›å»ºä»¥ä¸‹HTTPè¯·æ±‚ï¼š
- URL: http://api.example.com/users
- æ–¹æ³•: POST
- å¤´éƒ¨: Authorization: Bearer token123
- å¤´éƒ¨: Content-Type: application/json
- è¯·æ±‚ä½“: {"name":"test","age":25}

**è¦æ±‚**ï¼š
```java
Request request = // ä½ çš„ä»£ç 
```

**æµ‹è¯•**ï¼š
```java
System.out.println(request.url());
System.out.println(request.method());
System.out.println(request.header("Authorization"));
```

**çŸ¥è¯†ç‚¹**ï¼š
- Builderæ¨¡å¼çš„ä½¿ç”¨
- Requestçš„åˆ›å»º
- RequestBodyçš„åˆ›å»º

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ</summary>

```java
RequestBody body = RequestBody.create(
    "{\"name\":\"test\",\"age\":25}", 
    "application/json"
);

Request request = new Request.Builder()
    .url("http://api.example.com/users")
    .method("POST", body)
    .header("Authorization", "Bearer token123")
    .header("Content-Type", "application/json")
    .build();
```
</details>

---

## ğŸ”¥ è¿›é˜¶é¢˜ï¼ˆå®ç°åŠŸèƒ½ï¼‰

### ç»ƒä¹ 3ï¼šå®ç°ä¸€ä¸ªæ—¥å¿—æ‹¦æˆªå™¨
**éš¾åº¦**ï¼šâ­â­â­â˜†â˜†

**ä»»åŠ¡**ï¼š
å®ç°ä¸€ä¸ªLoggingInterceptorï¼Œæ‰“å°è¯·æ±‚å’Œå“åº”ä¿¡æ¯ã€‚

**è¦æ±‚**ï¼š
```java
public class LoggingInterceptor implements Interceptor {
    @Override
    public Response intercept(Chain chain) throws IOException {
        // 1. è·å–è¯·æ±‚
        // 2. æ‰“å°è¯·æ±‚ä¿¡æ¯ï¼ˆURLã€æ–¹æ³•ã€å¤´éƒ¨ï¼‰
        // 3. è®°å½•å¼€å§‹æ—¶é—´
        // 4. æ‰§è¡Œè¯·æ±‚
        // 5. è®°å½•ç»“æŸæ—¶é—´
        // 6. æ‰“å°å“åº”ä¿¡æ¯ï¼ˆçŠ¶æ€ç ã€è€—æ—¶ï¼‰
        // 7. è¿”å›å“åº”
    }
}
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
--> POST http://api.example.com/users
--> Content-Type: application/json
--> END POST

<-- 200 OK http://api.example.com/users (120ms)
<-- Content-Type: application/json
<-- Content-Length: 42
<-- END HTTP
```

**çŸ¥è¯†ç‚¹**ï¼š
- Interceptorçš„å®ç°
- chain.proceed()çš„ä½¿ç”¨
- ä¸å½±å“è¯·æ±‚æµç¨‹

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ</summary>

```java
public class LoggingInterceptor implements Interceptor {
    @Override
    public Response intercept(Chain chain) throws IOException {
        Request request = chain.request();
        
        // æ‰“å°è¯·æ±‚ä¿¡æ¯
        System.out.println("--> " + request.method() + " " + request.url());
        for (Map.Entry<String, String> entry : request.headers().entrySet()) {
            System.out.println("--> " + entry.getKey() + ": " + entry.getValue());
        }
        System.out.println("--> END " + request.method());
        System.out.println();
        
        // è®°å½•å¼€å§‹æ—¶é—´
        long startNs = System.nanoTime();
        
        // æ‰§è¡Œè¯·æ±‚
        Response response = chain.proceed(request);
        
        // è®¡ç®—è€—æ—¶
        long tookMs = TimeUnit.NANOSECONDS.toMillis(System.nanoTime() - startNs);
        
        // æ‰“å°å“åº”ä¿¡æ¯
        System.out.println("<-- " + response.code() + " " + response.message() 
            + " " + request.url() + " (" + tookMs + "ms)");
        for (Map.Entry<String, String> entry : response.headers().entrySet()) {
            System.out.println("<-- " + entry.getKey() + ": " + entry.getValue());
        }
        System.out.println("<-- END HTTP");
        System.out.println();
        
        return response;
    }
}
```
</details>

---

### ç»ƒä¹ 4ï¼šå®ç°è¿æ¥çš„å¼•ç”¨è®¡æ•°
**éš¾åº¦**ï¼šâ­â­â­â­â˜†

**ä»»åŠ¡**ï¼š
åœ¨RealConnectionä¸­å®ç°å¼•ç”¨è®¡æ•°åŠŸèƒ½ã€‚

**è¦æ±‚**ï¼š
```java
public class RealConnection {
    private int referenceCount = 0;
    
    // 1. å®ç°acquire()æ–¹æ³•ï¼šå¼•ç”¨è®¡æ•°+1
    // 2. å®ç°release()æ–¹æ³•ï¼šå¼•ç”¨è®¡æ•°-1ï¼Œå¦‚æœä¸º0è®°å½•ç©ºé—²æ—¶é—´
    // 3. å®ç°isInUse()æ–¹æ³•ï¼šæ£€æŸ¥æ˜¯å¦æ­£åœ¨ä½¿ç”¨
    // 4. å®ç°getIdleAtNanos()æ–¹æ³•ï¼šè¿”å›ç©ºé—²å¼€å§‹æ—¶é—´
}
```

**æµ‹è¯•ä»£ç **ï¼š
```java
RealConnection conn = new RealConnection("example.com", 80);

System.out.println("ç©ºé—²ï¼š" + !conn.isInUse());  // true

conn.acquire();
System.out.println("ä½¿ç”¨ä¸­ï¼š" + conn.isInUse());  // true

conn.release();
System.out.println("ç©ºé—²ï¼š" + !conn.isInUse());  // true

long idleTime = System.nanoTime() - conn.getIdleAtNanos();
System.out.println("ç©ºé—²æ—¶é—´ï¼ˆçº³ç§’ï¼‰ï¼š" + idleTime);  // > 0
```

**çŸ¥è¯†ç‚¹**ï¼š
- å¼•ç”¨è®¡æ•°çš„ä½œç”¨
- System.nanoTime()çš„ä½¿ç”¨
- è¿æ¥çŠ¶æ€ç®¡ç†

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ</summary>

```java
public class RealConnection {
    private int referenceCount = 0;
    private long idleAtNanos;
    
    public synchronized void acquire() {
        referenceCount++;
    }
    
    public synchronized void release() {
        referenceCount--;
        if (referenceCount == 0) {
            idleAtNanos = System.nanoTime();
        }
    }
    
    public synchronized boolean isInUse() {
        return referenceCount > 0;
    }
    
    public synchronized long getIdleAtNanos() {
        return idleAtNanos;
    }
}
```
</details>

---

## ğŸ’ª é«˜çº§é¢˜ï¼ˆæ ¸å¿ƒåŸç†ï¼‰

### ç»ƒä¹ 5ï¼šæ‰‹å†™æ‹¦æˆªå™¨é“¾çš„é€’å½’è°ƒç”¨
**éš¾åº¦**ï¼šâ­â­â­â­â­

**ä»»åŠ¡**ï¼š
å®ç°RealInterceptorChainçš„proceed()æ–¹æ³•ï¼Œæ”¯æŒå¤šä¸ªæ‹¦æˆªå™¨çš„é€’å½’è°ƒç”¨ã€‚

**è¦æ±‚**ï¼š
```java
public class RealInterceptorChain implements Interceptor.Chain {
    private final List<Interceptor> interceptors;
    private final int index;
    private final Request request;
    
    public RealInterceptorChain(
        List<Interceptor> interceptors,
        int index,
        Request request
    ) {
        this.interceptors = interceptors;
        this.index = index;
        this.request = request;
    }
    
    @Override
    public Request request() {
        return request;
    }
    
    @Override
    public Response proceed(Request request) throws IOException {
        // å®ç°é€’å½’è°ƒç”¨é€»è¾‘
    }
}
```

**æµ‹è¯•ä»£ç **ï¼š
```java
List<Interceptor> interceptors = Arrays.asList(
    new Interceptor1(),
    new Interceptor2(),
    new Interceptor3()
);

RealInterceptorChain chain = new RealInterceptorChain(interceptors, 0, request);
Response response = chain.proceed(request);

// è¾“å‡ºåº”è¯¥æ˜¯ï¼š
// Interceptor1: before
// Interceptor2: before
// Interceptor3: before
// Interceptor3: after
// Interceptor2: after
// Interceptor1: after
```

**çŸ¥è¯†ç‚¹**ï¼š
- é€’å½’è°ƒç”¨åŸç†
- è´£ä»»é“¾æ¨¡å¼
- indexçš„ä½œç”¨

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ</summary>

```java
@Override
public Response proceed(Request request) throws IOException {
    // æ£€æŸ¥æ˜¯å¦åˆ°è¾¾æœ«å°¾
    if (index >= interceptors.size()) {
        throw new AssertionError("æ²¡æœ‰æ›´å¤šæ‹¦æˆªå™¨");
    }
    
    // åˆ›å»ºä¸‹ä¸€ä¸ªChain
    RealInterceptorChain next = new RealInterceptorChain(
        interceptors,
        index + 1,
        request
    );
    
    // è·å–å½“å‰æ‹¦æˆªå™¨
    Interceptor interceptor = interceptors.get(index);
    
    // è°ƒç”¨å½“å‰æ‹¦æˆªå™¨
    Response response = interceptor.intercept(next);
    
    return response;
}
```
</details>

---

### ç»ƒä¹ 6ï¼šå®ç°HTTPè¯·æ±‚çš„å‘é€å’Œæ¥æ”¶
**éš¾åº¦**ï¼šâ­â­â­â­â­

**ä»»åŠ¡**ï¼š
å®ç°CallServerInterceptorä¸­çš„writeRequest()å’ŒreadResponse()æ–¹æ³•ã€‚

**è¦æ±‚**ï¼š
```java
// 1. writeRequest()ï¼šå°†HTTPè¯·æ±‚å†™å…¥Socket
//    - å†™å…¥è¯·æ±‚è¡Œï¼šGET /path HTTP/1.1\r\n
//    - å†™å…¥è¯·æ±‚å¤´ï¼šHeader-Name: Header-Value\r\n
//    - å†™å…¥ç©ºè¡Œï¼š\r\n
//    - å†™å…¥è¯·æ±‚ä½“ï¼ˆå¦‚æœæœ‰ï¼‰

// 2. readResponse()ï¼šä»Socketè¯»å–HTTPå“åº”
//    - è¯»å–çŠ¶æ€è¡Œï¼šHTTP/1.1 200 OK
//    - è¯»å–å“åº”å¤´ï¼šå¾ªç¯è¯»å–ï¼Œç›´åˆ°ç©ºè¡Œ
//    - è¯»å–å“åº”ä½“ï¼šæ ¹æ®Content-Length
```

**æµ‹è¯•ä»£ç **ï¼š
```java
// åˆ›å»ºä¸€ä¸ªæ¨¡æ‹Ÿçš„Socketè¿æ¥
Socket socket = new Socket("httpbin.org", 80);

Request request = new Request.Builder()
    .url("http://httpbin.org/get")
    .build();

// å‘é€è¯·æ±‚
writeRequest(socket.getOutputStream(), request);

// è¯»å–å“åº”
Response response = readResponse(socket.getInputStream(), request);

System.out.println("çŠ¶æ€ç ï¼š" + response.code());  // 200
System.out.println("å“åº”ä½“ï¼š" + response.body().string());
```

**çŸ¥è¯†ç‚¹**ï¼š
- HTTPåè®®æ ¼å¼
- \r\nçš„ä½œç”¨
- Content-Lengthçš„å¤„ç†
- BufferedReader/BufferedWriter

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ</summary>

```java
private void writeRequest(OutputStream out, Request request) throws IOException {
    BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(out, "UTF-8"));
    
    // å†™å…¥è¯·æ±‚è¡Œ
    String path = getPath(request.url());
    writer.write(request.method() + " " + path + " HTTP/1.1\r\n");
    
    // å†™å…¥è¯·æ±‚å¤´
    for (Map.Entry<String, String> entry : request.headers().entrySet()) {
        writer.write(entry.getKey() + ": " + entry.getValue() + "\r\n");
    }
    
    // å†™å…¥ç©ºè¡Œ
    writer.write("\r\n");
    writer.flush();
    
    // å†™å…¥è¯·æ±‚ä½“
    if (request.body() != null) {
        request.body().writeTo(out);
    }
}

private Response readResponse(InputStream in, Request request) throws IOException {
    BufferedReader reader = new BufferedReader(new InputStreamReader(in, "UTF-8"));
    
    // è¯»å–çŠ¶æ€è¡Œ
    String statusLine = reader.readLine();
    String[] parts = statusLine.split(" ", 3);
    int code = Integer.parseInt(parts[1]);
    String message = parts.length >= 3 ? parts[2] : "";
    
    Response.Builder builder = new Response.Builder()
        .request(request)
        .code(code)
        .message(message);
    
    // è¯»å–å“åº”å¤´
    long contentLength = -1;
    String line;
    while ((line = reader.readLine()) != null) {
        if (line.isEmpty()) break;  // ç©ºè¡Œ
        
        int colonIndex = line.indexOf(":");
        String name = line.substring(0, colonIndex).trim();
        String value = line.substring(colonIndex + 1).trim();
        builder.header(name, value);
        
        if (name.equalsIgnoreCase("Content-Length")) {
            contentLength = Long.parseLong(value);
        }
    }
    
    // è¯»å–å“åº”ä½“
    byte[] bodyBytes;
    if (contentLength > 0) {
        bodyBytes = readExactly(in, (int) contentLength);
    } else {
        bodyBytes = new byte[0];
    }
    
    ResponseBody body = ResponseBody.create(bodyBytes, "text/plain");
    builder.body(body);
    
    return builder.build();
}

private byte[] readExactly(InputStream in, int length) throws IOException {
    byte[] bytes = new byte[length];
    int offset = 0;
    while (offset < length) {
        int count = in.read(bytes, offset, length - offset);
        if (count == -1) throw new EOFException();
        offset += count;
    }
    return bytes;
}
```
</details>

---

## ğŸ† æŒ‘æˆ˜é¢˜ï¼ˆç»¼åˆåº”ç”¨ï¼‰

### ç»ƒä¹ 7ï¼šå®ç°ä¸€ä¸ªå®Œæ•´çš„é‡è¯•æ‹¦æˆªå™¨
**éš¾åº¦**ï¼šâ­â­â­â­â­

**ä»»åŠ¡**ï¼š
å®ç°ä¸€ä¸ªæ”¯æŒé‡è¯•çš„æ‹¦æˆªå™¨ï¼Œè¦æ±‚ï¼š
1. è‡ªåŠ¨é‡è¯•IOException
2. æœ€å¤šé‡è¯•3æ¬¡
3. æ¯æ¬¡é‡è¯•å‰ç­‰å¾…1ç§’
4. æ‰“å°é‡è¯•æ—¥å¿—

**æµ‹è¯•åœºæ™¯**ï¼š
```java
// æ¨¡æ‹Ÿä¸€ä¸ªä¸ç¨³å®šçš„æœåŠ¡å™¨
// å‰2æ¬¡è¯·æ±‚å¤±è´¥ï¼Œç¬¬3æ¬¡æˆåŠŸ

Response response = client.newCall(request).execute();
// è¾“å‡ºï¼š
// è¯·æ±‚å¤±è´¥ï¼šConnection refused
// é‡è¯• 1/3...
// è¯·æ±‚å¤±è´¥ï¼šConnection refused
// é‡è¯• 2/3...
// è¯·æ±‚æˆåŠŸï¼
```

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ</summary>

```java
public class RetryInterceptor implements Interceptor {
    private static final int MAX_RETRIES = 3;
    
    @Override
    public Response intercept(Chain chain) throws IOException {
        Request request = chain.request();
        
        int retryCount = 0;
        while (true) {
            try {
                // å°è¯•æ‰§è¡Œè¯·æ±‚
                Response response = chain.proceed(request);
                return response;
            } catch (IOException e) {
                retryCount++;
                
                if (retryCount > MAX_RETRIES) {
                    // è¶…è¿‡æœ€å¤§é‡è¯•æ¬¡æ•°
                    throw e;
                }
                
                // æ‰“å°æ—¥å¿—
                System.out.println("è¯·æ±‚å¤±è´¥ï¼š" + e.getMessage());
                System.out.println("é‡è¯• " + retryCount + "/" + MAX_RETRIES + "...");
                
                // ç­‰å¾…1ç§’
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException ie) {
                    Thread.currentThread().interrupt();
                    throw e;
                }
            }
        }
    }
}
```
</details>

---

### ç»ƒä¹ 8ï¼šå®ç°è¿æ¥æ± çš„æ¸…ç†é€»è¾‘
**éš¾åº¦**ï¼šâ­â­â­â­â­

**ä»»åŠ¡**ï¼š
å®ç°ConnectionPoolçš„cleanup()æ–¹æ³•ï¼ŒæŒ‰ç…§ä»¥ä¸‹ç­–ç•¥æ¸…ç†è¿æ¥ï¼š
1. æ‰¾å‡ºæœ€é•¿ç©ºé—²çš„è¿æ¥
2. å¦‚æœç©ºé—²æ—¶é—´ >= 5åˆ†é’Ÿï¼Œå…³é—­å®ƒ
3. å¦‚æœç©ºé—²è¿æ¥æ•° > 5ï¼Œå…³é—­æœ€è€çš„
4. è¿”å›ä¸‹æ¬¡æ¸…ç†çš„ç­‰å¾…æ—¶é—´

**è¦æ±‚**ï¼š
```java
/**
 * @return ç­‰å¾…æ—¶é—´ï¼ˆçº³ç§’ï¼‰ï¼Œ-1è¡¨ç¤ºé€€å‡ºæ¸…ç†çº¿ç¨‹
 */
private synchronized long cleanup(long now) {
    // ä½ çš„å®ç°
}
```

**æµ‹è¯•ä»£ç **ï¼š
```java
ConnectionPool pool = new ConnectionPool();

// æ·»åŠ 6ä¸ªè¿æ¥ï¼Œéƒ½ç©ºé—²
for (int i = 0; i < 6; i++) {
    RealConnection conn = new RealConnection("host" + i, 80);
    conn.release();  // æ ‡è®°ä¸ºç©ºé—²
    pool.put(conn);
}

// æ‰§è¡Œæ¸…ç†
long waitNanos = pool.cleanup(System.nanoTime());

// åº”è¯¥æ¸…ç†1ä¸ªè¿æ¥ï¼ˆå› ä¸ºè¶…è¿‡5ä¸ªï¼‰
System.out.println("è¿æ¥æ•°ï¼š" + pool.connectionCount());  // 5
```

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹å‚è€ƒç­”æ¡ˆ</summary>

```java
private synchronized long cleanup(long now) {
    int inUseConnectionCount = 0;
    int idleConnectionCount = 0;
    RealConnection longestIdleConnection = null;
    long longestIdleDurationNs = Long.MIN_VALUE;
    
    // éå†æ‰€æœ‰è¿æ¥
    for (RealConnection connection : connections) {
        if (connection.isInUse()) {
            inUseConnectionCount++;
            continue;
        }
        
        idleConnectionCount++;
        
        // è®¡ç®—ç©ºé—²æ—¶é—´
        long idleDurationNs = now - connection.getIdleAtNanos();
        if (idleDurationNs > longestIdleDurationNs) {
            longestIdleDurationNs = idleDurationNs;
            longestIdleConnection = connection;
        }
    }
    
    // åˆ¤æ–­æ˜¯å¦éœ€è¦æ¸…ç†
    if (longestIdleDurationNs >= this.keepAliveDurationNs
        || idleConnectionCount > this.maxIdleConnections) {
        // æ¸…ç†æœ€é•¿ç©ºé—²çš„è¿æ¥
        connections.remove(longestIdleConnection);
        try {
            longestIdleConnection.close();
        } catch (IOException e) {
            // å¿½ç•¥
        }
        return 0;  // ç«‹å³å†æ¬¡æ¸…ç†
    } else if (idleConnectionCount > 0) {
        // æœ‰ç©ºé—²è¿æ¥ï¼Œç­‰å¾…åˆ°è¿‡æœŸ
        return keepAliveDurationNs - longestIdleDurationNs;
    } else if (inUseConnectionCount > 0) {
        // æ‰€æœ‰è¿æ¥éƒ½åœ¨ä½¿ç”¨ä¸­
        return keepAliveDurationNs;
    } else {
        // æ²¡æœ‰è¿æ¥ï¼Œé€€å‡ºæ¸…ç†çº¿ç¨‹
        cleanupThread = null;
        return -1;
    }
}
```
</details>

---

## ğŸ“ ç»ƒä¹ å»ºè®®

1. **æŒ‰é¡ºåºå®Œæˆ**ï¼šä»åŸºç¡€é¢˜åˆ°æŒ‘æˆ˜é¢˜ï¼Œé€æ­¥æå‡
2. **å…ˆæ€è€ƒå†çœ‹ç­”æ¡ˆ**ï¼šå°½é‡ç‹¬ç«‹å®Œæˆï¼Œå®åœ¨å¡ä½å†çœ‹
3. **è¿è¡Œæµ‹è¯•ä»£ç **ï¼šéªŒè¯ä½ çš„å®ç°æ˜¯å¦æ­£ç¡®
4. **å¯¹æ¯”ç­”æ¡ˆ**ï¼šçœ‹çœ‹æœ‰ä»€ä¹ˆå¯ä»¥æ”¹è¿›çš„
5. **æ‰©å±•ç»ƒä¹ **ï¼šå°è¯•æ·»åŠ æ–°åŠŸèƒ½

---

## ğŸ¯ å­¦ä¹ æ£€æŸ¥ç‚¹

å®Œæˆè¿™äº›ç»ƒä¹ åï¼Œä½ åº”è¯¥èƒ½å¤Ÿï¼š
- [ ] ç‹¬ç«‹å®ç°RequestBodyå’ŒResponseBody
- [ ] ä½¿ç”¨Builderæ¨¡å¼åˆ›å»ºå¯¹è±¡
- [ ] å®ç°è‡ªå®šä¹‰æ‹¦æˆªå™¨
- [ ] ç†è§£å¼•ç”¨è®¡æ•°çš„åŸç†
- [ ] å®ç°æ‹¦æˆªå™¨é“¾çš„é€’å½’è°ƒç”¨
- [ ] ç†è§£HTTPåè®®æ ¼å¼
- [ ] å®ç°é‡è¯•é€»è¾‘
- [ ] å®ç°è¿æ¥æ± æ¸…ç†

**å…¨éƒ¨å®Œæˆï¼Ÿæ­å–œä½ ï¼Œå·²ç»æ·±å…¥ç†è§£OkHttpæºç äº†ï¼** ğŸ‰

