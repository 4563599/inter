# â“ OkHttpæºç å­¦ä¹  - å¸¸è§é—®é¢˜FAQ

> å­¦ä¹ è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Ÿå…ˆçœ‹çœ‹è¿™é‡Œï¼

---

## ğŸ“š å­¦ä¹ è§„åˆ’ç±»

### Q1: æˆ‘æ˜¯é›¶åŸºç¡€ï¼Œèƒ½å­¦ä¼šå—ï¼Ÿ
**A**: å¯ä»¥ï¼Œä½†éœ€è¦ä¸€å®šçš„JavaåŸºç¡€ï¼š
- âœ… **éœ€è¦**ï¼šäº†è§£JavaåŸºç¡€è¯­æ³•ã€é¢å‘å¯¹è±¡ã€æ¥å£ã€ç»§æ‰¿
- âœ… **éœ€è¦**ï¼šäº†è§£HTTPåŸºç¡€çŸ¥è¯†ï¼ˆä»€ä¹ˆæ˜¯è¯·æ±‚ã€å“åº”ã€çŠ¶æ€ç ï¼‰
- âŒ **ä¸éœ€è¦**ï¼šä¸éœ€è¦Androidå¼€å‘ç»éªŒ
- âŒ **ä¸éœ€è¦**ï¼šä¸éœ€è¦ç½‘ç»œç¼–ç¨‹ç»éªŒï¼ˆä¼šæ•™ä½ ï¼‰

**å»ºè®®**ï¼š
1. å¦‚æœJavaåŸºç¡€è–„å¼±ï¼Œå…ˆå­¦ä¹ JavaåŸºç¡€ï¼ˆ1-2å‘¨ï¼‰
2. å¦‚æœHTTPä¸äº†è§£ï¼Œå…ˆçœ‹ã€Šå›¾è§£HTTPã€‹ï¼ˆ2-3å¤©ï¼‰
3. ç„¶åå†å¼€å§‹å­¦ä¹ OkHttpæºç 

---

### Q2: å­¦å®Œéœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ
**A**: å–å†³äºä½ çš„æŠ•å…¥æ—¶é—´ï¼š
- **å¿«é€Ÿæ¨¡å¼**ï¼ˆæ¯å¤©4-5å°æ—¶ï¼‰ï¼š3-4å¤©å®Œæˆ
- **æ ‡å‡†æ¨¡å¼**ï¼ˆæ¯å¤©2-3å°æ—¶ï¼‰ï¼š7å¤©å®Œæˆï¼ˆæ¨èï¼‰
- **è½»æ¾æ¨¡å¼**ï¼ˆæ¯å¤©1-2å°æ—¶ï¼‰ï¼š10-14å¤©å®Œæˆ
- **æ·±å…¥æ¨¡å¼**ï¼ˆåŒ…æ‹¬æ‰€æœ‰ç»ƒä¹ å’Œæ‰©å±•ï¼‰ï¼š3-4å‘¨

**å»ºè®®**ï¼šé€‰æ‹©æ ‡å‡†æ¨¡å¼ï¼Œæ¯å¤©2-3å°æ—¶ï¼Œ1å‘¨å®Œæˆï¼Œæ•ˆæœæœ€å¥½ã€‚

---

### Q3: å¿…é¡»æŒ‰ç…§7å¤©çš„é¡ºåºå­¦ä¹ å—ï¼Ÿ
**A**: å¼ºçƒˆæ¨èæŒ‰é¡ºåºå­¦ä¹ ï¼Œå› ä¸ºï¼š
1. **çŸ¥è¯†ä¾èµ–**ï¼šåé¢çš„å†…å®¹ä¾èµ–å‰é¢çš„çŸ¥è¯†
2. **å¾ªåºæ¸è¿›**ï¼šä»æ˜“åˆ°éš¾ï¼Œç¬¦åˆè®¤çŸ¥è§„å¾‹
3. **é¿å…æŒ«è´¥**ï¼šè·³è·ƒå­¦ä¹ å®¹æ˜“å¡ä½ï¼Œå½±å“ä¿¡å¿ƒ

**ä¾‹å¤–æƒ…å†µ**ï¼š
- å¦‚æœä½ å·²ç»å¾ˆç†Ÿæ‚‰Builderæ¨¡å¼ï¼ŒDay 1å¯ä»¥å¿«é€Ÿè¿‡
- å¦‚æœä½ å·²ç»ç†è§£HTTPåè®®ï¼ŒDay 5å¯ä»¥é‡ç‚¹çœ‹å®ç°

---

### Q4: æˆ‘åªæƒ³å¿«é€Ÿäº†è§£ï¼Œä¸æƒ³æ·±å…¥å­¦ä¹ ï¼Œæ€ä¹ˆåŠï¼Ÿ
**A**: æ¨èå¿«é€Ÿé€šé“ï¼ˆ2-3å°æ—¶ï¼‰ï¼š
1. é˜…è¯» `README.md`ï¼ˆ15åˆ†é’Ÿï¼‰
2. é˜…è¯» `å¿«é€Ÿå‚è€ƒå¡ç‰‡.md`ï¼ˆ30åˆ†é’Ÿï¼‰
3. é˜…è¯» `æ ¸å¿ƒæµç¨‹å›¾.md`ï¼ˆ20åˆ†é’Ÿï¼‰
4. è¿è¡Œ `examples/` ä¸‹çš„ç¤ºä¾‹ï¼ˆ30åˆ†é’Ÿï¼‰
5. é‡ç‚¹çœ‹3ä¸ªæ ¸å¿ƒæ¨¡æ¿ï¼š
   - `07_RealInterceptorChain_æ¨¡æ¿.java`ï¼ˆ30åˆ†é’Ÿï¼‰
   - `13_CallServerInterceptor_æ¨¡æ¿.java`ï¼ˆ30åˆ†é’Ÿï¼‰
   - `15_ConnectionPool_æ¨¡æ¿.java`ï¼ˆ20åˆ†é’Ÿï¼‰

---

## ğŸ”§ æŠ€æœ¯ç†è§£ç±»

### Q5: æ‹¦æˆªå™¨é“¾çš„é€’å½’è°ƒç”¨å¤ªéš¾ç†è§£äº†ï¼
**A**: è¿™æ˜¯æœ€æ ¸å¿ƒä¹Ÿæ˜¯æœ€éš¾çš„éƒ¨åˆ†ï¼Œå°è¯•è¿™äº›æ–¹æ³•ï¼š

**æ–¹æ³•1ï¼šç”»å›¾**
```
è¯·æ±‚ â†’
  Chain0 (index=0)
    â†’ Interceptor0.intercept(Chain1)
      Chain1 (index=1)
        â†’ Interceptor1.intercept(Chain2)
          Chain2 (index=2)
            â†’ Interceptor2.intercept(Chain3)
â† å“åº”
```

**æ–¹æ³•2ï¼šè°ƒè¯•**
```java
// åœ¨æ¯ä¸ªæ‹¦æˆªå™¨ä¸­æ‰“å°
public Response intercept(Chain chain) {
    System.out.println("Before: " + this.getClass().getSimpleName());
    Response response = chain.proceed(chain.request());
    System.out.println("After: " + this.getClass().getSimpleName());
    return response;
}
```

**æ–¹æ³•3ï¼šç±»æ¯”**
æŠŠæ‹¦æˆªå™¨æƒ³è±¡æˆ**ä¿„ç½—æ–¯å¥—å¨ƒ**ï¼š
- æœ€å¤–å±‚ï¼šInterceptor0
- ä¸­é—´å±‚ï¼šInterceptor1
- æœ€å†…å±‚ï¼šInterceptor2
- æ‹†å¼€ï¼šBefore0 â†’ Before1 â†’ Before2
- è£…å›ï¼šAfter2 â†’ After1 â†’ After0

**æ¨èèµ„æº**ï¼š
- å®æˆ˜ç»ƒä¹ é¢˜ #5
- 7å¤©å­¦ä¹ è·¯çº¿å›¾ Day 2

---

### Q6: HTTPåè®®çš„\r\næ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆå¿…é¡»ç”¨å®ƒï¼Ÿ
**A**: \r\næ˜¯HTTPè§„èŒƒè¦æ±‚çš„è¡Œåˆ†éš”ç¬¦ï¼š
- **\r** = Carriage Returnï¼ˆå›è½¦ï¼Œå…‰æ ‡å›åˆ°è¡Œé¦–ï¼‰
- **\n** = Line Feedï¼ˆæ¢è¡Œï¼Œå…‰æ ‡ä¸‹ç§»ä¸€è¡Œï¼‰
- **\r\n** = CRLFï¼ˆå›è½¦+æ¢è¡Œï¼‰

**ä¸ºä»€ä¹ˆå¿…é¡»ç”¨ï¼Ÿ**
- HTTP/1.1è§„èŒƒï¼ˆRFC 2616ï¼‰æ˜ç¡®è¦æ±‚
- ä¸ç”¨\r\nï¼ŒæœåŠ¡å™¨å¯èƒ½æ— æ³•æ­£ç¡®è§£æ
- åªç”¨\nï¼ŒæŸäº›æœåŠ¡å™¨ä¼šæŠ¥é”™

**ç¤ºä¾‹**ï¼š
```java
// âŒ é”™è¯¯
writer.write("GET /path HTTP/1.1\n");

// âœ… æ­£ç¡®
writer.write("GET /path HTTP/1.1\r\n");
```

**å¦‚ä½•éªŒè¯ï¼Ÿ**
ç”¨WiresharkæŠ“åŒ…ï¼Œå¯ä»¥çœ‹åˆ°\r\næ˜¾ç¤ºä¸º[CR][LF]

---

### Q7: ä¸ºä»€ä¹ˆResponseBody.string()åªèƒ½è°ƒç”¨ä¸€æ¬¡ï¼Ÿ
**A**: å› ä¸ºå†…éƒ¨æµåªèƒ½è¯»å–ä¸€æ¬¡ï¼š

```java
public String string() throws IOException {
    byte[] bytes = source.readAllBytes();  // è¯»å–æµ
    source.close();  // å…³é—­æµ
    return new String(bytes, "UTF-8");
}

// ç¬¬äºŒæ¬¡è°ƒç”¨
response.body().string();  // IOException: æµå·²å…³é—­
```

**è§£å†³æ–¹æ³•**ï¼š
```java
// æ–¹æ³•1ï¼šä¿å­˜ç»“æœ
String body = response.body().string();
System.out.println(body);
System.out.println(body);  // âœ… ä½¿ç”¨ä¿å­˜çš„ç»“æœ

// æ–¹æ³•2ï¼šå¤åˆ¶Response
Response copy = response.newBuilder().build();
String body1 = response.body().string();
String body2 = copy.body().string();
```

---

### Q8: è¿æ¥æ± ä¸ºä»€ä¹ˆèƒ½æå‡æ€§èƒ½ï¼Ÿ
**A**: å› ä¸ºè·³è¿‡äº†TCPä¸‰æ¬¡æ¡æ‰‹ï¼š

**ä¸ä½¿ç”¨è¿æ¥æ± **ï¼š
```
ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼š
1. TCPä¸‰æ¬¡æ¡æ‰‹ï¼ˆ50-100msï¼‰
2. å‘é€HTTPè¯·æ±‚ï¼ˆ10msï¼‰
3. æ¥æ”¶å“åº”ï¼ˆ20msï¼‰
æ€»è€—æ—¶ï¼š80-130ms

ç¬¬äºŒæ¬¡è¯·æ±‚ï¼ˆç›¸åŒæœåŠ¡å™¨ï¼‰ï¼š
1. TCPä¸‰æ¬¡æ¡æ‰‹ï¼ˆ50-100msï¼‰â† é‡å¤ï¼
2. å‘é€HTTPè¯·æ±‚ï¼ˆ10msï¼‰
3. æ¥æ”¶å“åº”ï¼ˆ20msï¼‰
æ€»è€—æ—¶ï¼š80-130ms
```

**ä½¿ç”¨è¿æ¥æ± **ï¼š
```
ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼š
1. TCPä¸‰æ¬¡æ¡æ‰‹ï¼ˆ50-100msï¼‰
2. å‘é€HTTPè¯·æ±‚ï¼ˆ10msï¼‰
3. æ¥æ”¶å“åº”ï¼ˆ20msï¼‰
4. æ”¾å…¥è¿æ¥æ± 
æ€»è€—æ—¶ï¼š80-130ms

ç¬¬äºŒæ¬¡è¯·æ±‚ï¼ˆç›¸åŒæœåŠ¡å™¨ï¼‰ï¼š
1. ä»è¿æ¥æ± è·å–ï¼ˆ0msï¼‰â† è·³è¿‡æ¡æ‰‹ï¼
2. å‘é€HTTPè¯·æ±‚ï¼ˆ10msï¼‰
3. æ¥æ”¶å“åº”ï¼ˆ20msï¼‰
æ€»è€—æ—¶ï¼š30ms

æ€§èƒ½æå‡ï¼š60-75%
```

**HTTPSæ›´æ˜æ˜¾**ï¼š
HTTPSè¿˜è¦TLSæ¡æ‰‹ï¼ˆé¢å¤–100-200msï¼‰ï¼Œè¿æ¥æ± å¯ä»¥èŠ‚çœæ›´å¤šæ—¶é—´ã€‚

---

### Q9: ä¸ºä»€ä¹ˆæ¨èå…¨å±€å•ä¾‹OkHttpClientï¼Ÿ
**A**: å› ä¸ºæ¯ä¸ªClientéƒ½æœ‰ç‹¬ç«‹çš„èµ„æºï¼š

```java
// âŒ é”™è¯¯ï¼šæ¯æ¬¡åˆ›å»ºæ–°Client
public void request1() {
    OkHttpClient client = new OkHttpClient();  // æ–°çº¿ç¨‹æ± 
    client.newCall(request).execute();
}

public void request2() {
    OkHttpClient client = new OkHttpClient();  // åˆä¸€ä¸ªæ–°çº¿ç¨‹æ± 
    client.newCall(request).execute();
}
// ç»“æœï¼šä¸¤ä¸ªçº¿ç¨‹æ± ï¼Œä¸¤ä¸ªè¿æ¥æ± ï¼Œæ— æ³•å¤ç”¨è¿æ¥
```

```java
// âœ… æ­£ç¡®ï¼šå…¨å±€å•ä¾‹
public class HttpManager {
    private static final OkHttpClient client = new OkHttpClient();
    
    public static Response request1() {
        return client.newCall(request1).execute();
    }
    
    public static Response request2() {
        return client.newCall(request2).execute();
    }
}
// ç»“æœï¼šå…±äº«çº¿ç¨‹æ± å’Œè¿æ¥æ± ï¼Œå¯ä»¥å¤ç”¨è¿æ¥
```

**èµ„æºå¯¹æ¯”**ï¼š
| èµ„æº | å•ä¾‹ | æ¯æ¬¡åˆ›å»º |
|------|------|----------|
| çº¿ç¨‹æ±  | 1ä¸ª | Nä¸ª |
| è¿æ¥æ±  | 1ä¸ª | Nä¸ª |
| å†…å­˜å ç”¨ | ä½ | é«˜ |
| è¿æ¥å¤ç”¨ | âœ… | âŒ |

---

## ğŸ’» å®è·µæ“ä½œç±»

### Q10: æ¨¡æ¿ä¸­çš„TODOåº”è¯¥å¦‚ä½•ä½¿ç”¨ï¼Ÿ
**A**: TODOæ˜¯ç»™ä½ çš„å®ç°æŒ‡å¼•ï¼š

```java
// TODO: æ­¥éª¤1 - è·å–è¯·æ±‚å¹¶è§£æURL
// Request request = chain.request();
// String[] hostPort = parseUrl(request.url());
```

**ä½¿ç”¨æ­¥éª¤**ï¼š
1. **é˜…è¯»æ³¨é‡Š**ï¼šç†è§£è¿™ä¸€æ­¥è¦åšä»€ä¹ˆ
2. **å–æ¶ˆæ³¨é‡Š**ï¼šå»æ‰ `//`
3. **è¡¥å……å®ç°**ï¼šå¦‚æœæœ‰çœç•¥çš„éƒ¨åˆ†ï¼Œè¡¥å……å®Œæ•´
4. **æµ‹è¯•éªŒè¯**ï¼šç¡®ä¿åŠŸèƒ½æ­£ç¡®

**ä¸è¦**ï¼š
- âŒ ç›´æ¥å…¨éƒ¨å–æ¶ˆæ³¨é‡Šï¼ˆä¸ç†è§£ï¼‰
- âŒ å¤åˆ¶ç²˜è´´å°±æäº¤ï¼ˆæ²¡æœ‰æ€è€ƒï¼‰

**è¦**ï¼š
- âœ… å…ˆç†è§£ï¼Œå†å®ç°
- âœ… å°è¯•è‡ªå·±å†™ï¼Œå†å¯¹ç…§æ¨¡æ¿
- âœ… æ¯å®Œæˆä¸€æ­¥å°±æµ‹è¯•

---

### Q11: å¦‚ä½•è°ƒè¯•æ‹¦æˆªå™¨é“¾ï¼Ÿ
**A**: ä½¿ç”¨æ‰“å°æ—¥å¿—çš„æ–¹æ³•ï¼š

```java
// åˆ›å»ºè°ƒè¯•æ‹¦æˆªå™¨
public class DebugInterceptor implements Interceptor {
    private String name;
    
    public DebugInterceptor(String name) {
        this.name = name;
    }
    
    @Override
    public Response intercept(Chain chain) throws IOException {
        System.out.println(name + ": BEFORE");
        System.out.println(name + ": index=" + ((RealInterceptorChain)chain).index);
        
        Response response = chain.proceed(chain.request());
        
        System.out.println(name + ": AFTER");
        return response;
    }
}

// æ·»åŠ è°ƒè¯•æ‹¦æˆªå™¨
OkHttpClient client = new OkHttpClient.Builder()
    .addInterceptor(new DebugInterceptor("Inter1"))
    .addInterceptor(new DebugInterceptor("Inter2"))
    .addInterceptor(new DebugInterceptor("Inter3"))
    .build();

// è¾“å‡ºï¼š
// Inter1: BEFORE
// Inter1: index=0
// Inter2: BEFORE
// Inter2: index=1
// Inter3: BEFORE
// Inter3: index=2
// Inter3: AFTER
// Inter2: AFTER
// Inter1: AFTER
```

---

### Q12: å¦‚ä½•æµ‹è¯•è¿æ¥å¤ç”¨ï¼Ÿ
**A**: ä½¿ç”¨ConnectionPoolå’Œè®¡æ—¶ï¼š

```java
// åˆ›å»ºClient
OkHttpClient client = new OkHttpClient.Builder()
    .connectionPool(new ConnectionPool())
    .build();

// ç¬¬ä¸€æ¬¡è¯·æ±‚
long start1 = System.currentTimeMillis();
Response r1 = client.newCall(request).execute();
long time1 = System.currentTimeMillis() - start1;
System.out.println("ç¬¬ä¸€æ¬¡ï¼š" + time1 + "ms");

r1.close();

// ç¬¬äºŒæ¬¡è¯·æ±‚ï¼ˆç›¸åŒhostå’Œportï¼‰
long start2 = System.currentTimeMillis();
Response r2 = client.newCall(request).execute();
long time2 = System.currentTimeMillis() - start2;
System.out.println("ç¬¬äºŒæ¬¡ï¼š" + time2 + "ms");

r2.close();

// æ£€æŸ¥è¿æ¥æ•°
System.out.println("è¿æ¥æ•°ï¼š" + client.connectionPool().connectionCount());

// é¢„æœŸç»“æœï¼š
// ç¬¬ä¸€æ¬¡ï¼š100-150msï¼ˆå»ºç«‹è¿æ¥ï¼‰
// ç¬¬äºŒæ¬¡ï¼š20-50msï¼ˆå¤ç”¨è¿æ¥ï¼‰
// è¿æ¥æ•°ï¼š1
```

---

### Q13: å¦‚ä½•å®ç°ä¸€ä¸ªè‡ªå®šä¹‰æ‹¦æˆªå™¨ï¼Ÿ
**A**: å®ç°Interceptoræ¥å£ï¼š

```java
public class MyInterceptor implements Interceptor {
    @Override
    public Response intercept(Chain chain) throws IOException {
        Request request = chain.request();
        
        // 1. å¤„ç†è¯·æ±‚ï¼ˆå¯é€‰ï¼‰
        request = request.newBuilder()
            .header("Custom-Header", "value")
            .build();
        
        // 2. æ‰§è¡Œè¯·æ±‚ï¼ˆå¿…é¡»ï¼‰
        Response response = chain.proceed(request);
        
        // 3. å¤„ç†å“åº”ï¼ˆå¯é€‰ï¼‰
        if (response.code() != 200) {
            // å¤„ç†é”™è¯¯
        }
        
        // 4. è¿”å›å“åº”ï¼ˆå¿…é¡»ï¼‰
        return response;
    }
}

// ä½¿ç”¨
OkHttpClient client = new OkHttpClient.Builder()
    .addInterceptor(new MyInterceptor())
    .build();
```

**æ³¨æ„äº‹é¡¹**ï¼š
- âœ… å¿…é¡»è°ƒç”¨ `chain.proceed()`
- âœ… å¿…é¡»è¿”å› `Response`
- âŒ ä¸è¦åæ‰å¼‚å¸¸
- âŒ ä¸è¦é˜»å¡å¤ªä¹…

---

## ğŸ› é—®é¢˜æ’æŸ¥ç±»

### Q14: æç¤º"class not found"é”™è¯¯
**A**: æ£€æŸ¥åŒ…åå’Œå¯¼å…¥ï¼š

```java
// æ£€æŸ¥1ï¼šåŒ…åæ˜¯å¦æ­£ç¡®
package com.myokhttp;  // âœ…

// æ£€æŸ¥2ï¼šå¯¼å…¥æ˜¯å¦å®Œæ•´
import java.io.IOException;
import java.io.OutputStream;
// ...

// æ£€æŸ¥3ï¼šç±»åæ˜¯å¦åŒ¹é…æ–‡ä»¶å
public class Request { }  // æ–‡ä»¶åå¿…é¡»æ˜¯Request.java
```

---

### Q15: ç¼–è¯‘é”™è¯¯"cannot find symbol"
**A**: å¯èƒ½çš„åŸå› ï¼š

**åŸå› 1ï¼šä¾èµ–çš„ç±»è¿˜æ²¡å®ç°**
```java
// é”™è¯¯ï¼šRequestBodyè¿˜æ²¡å®ç°
Request request = new Request.Builder()
    .method("POST", body)  // bodyæ˜¯RequestBodyç±»å‹
    .build();

// è§£å†³ï¼šå…ˆå®ç°RequestBody
```

**åŸå› 2ï¼šæ–¹æ³•åæ‹¼å†™é”™è¯¯**
```java
// é”™è¯¯
request.getUrl();  // æ²¡æœ‰getUrl()æ–¹æ³•

// æ­£ç¡®
request.url();  // æ–¹æ³•åæ˜¯url()
```

---

### Q16: è¿è¡Œæ—¶é”™è¯¯"StackOverflowError"
**A**: æ‹¦æˆªå™¨é“¾é€’å½’è°ƒç”¨é”™è¯¯ï¼š

```java
// âŒ é”™è¯¯ï¼šå¿˜è®°index+1
RealInterceptorChain next = new RealInterceptorChain(
    interceptors,
    index,  // é”™è¯¯ï¼åº”è¯¥æ˜¯index+1
    request
);
// ç»“æœï¼šæ— é™é€’å½’ï¼Œæ ˆæº¢å‡º

// âœ… æ­£ç¡®
RealInterceptorChain next = new RealInterceptorChain(
    interceptors,
    index + 1,  // æ­£ç¡®ï¼
    request
);
```

---

### Q17: è¿æ¥æ± æµ‹è¯•æ—¶ï¼Œè¿æ¥æ•°æ€»æ˜¯0
**A**: å¯èƒ½çš„åŸå› ï¼š

**åŸå› 1ï¼šResponseæ²¡æœ‰å…³é—­**
```java
Response r = client.newCall(request).execute();
// æ²¡æœ‰close()ï¼Œè¿æ¥æ²¡æœ‰æ”¾å›è¿æ¥æ± 
r.close();  // âœ… å¿…é¡»å…³é—­
```

**åŸå› 2ï¼šç­‰å¾…æ—¶é—´å¤ªé•¿**
```java
Response r1 = client.newCall(request).execute();
r1.close();

Thread.sleep(6 * 60 * 1000);  // ç­‰å¾…6åˆ†é’Ÿ

// è¿æ¥å·²è¢«æ¸…ç†ï¼ˆé»˜è®¤5åˆ†é’Ÿï¼‰
System.out.println(pool.connectionCount());  // 0
```

**åŸå› 3ï¼šhostæˆ–portä¸åŒ**
```java
// è¯·æ±‚1
Request r1 = new Request.Builder()
    .url("http://example.com:80/api")  // host=example.com, port=80
    .build();

// è¯·æ±‚2
Request r2 = new Request.Builder()
    .url("http://api.example.com:80/data")  // host=api.example.comï¼ˆä¸åŒï¼ï¼‰
    .build();

// æ— æ³•å¤ç”¨ï¼ˆhostä¸åŒï¼‰
```

---

## ğŸ“– å­¦ä¹ èµ„æºç±»

### Q18: æœ‰æ¨èçš„HTTPå­¦ä¹ èµ„æ–™å—ï¼Ÿ
**A**: æ¨èèµ„æºï¼š

**ä¹¦ç±**ï¼š
1. ã€Šå›¾è§£HTTPã€‹- å…¥é—¨é¦–é€‰
2. ã€ŠHTTPæƒå¨æŒ‡å—ã€‹- æ·±å…¥å­¦ä¹ 
3. ã€Šç½‘ç»œæ˜¯æ€æ ·è¿æ¥çš„ã€‹- äº†è§£åº•å±‚

**åœ¨çº¿èµ„æº**ï¼š
1. MDN Web Docs - HTTPæ–‡æ¡£
2. RFC 2616 - HTTP/1.1è§„èŒƒ
3. Wireshark - æŠ“åŒ…å·¥å…·

---

### Q19: å­¦å®Œåï¼Œä¸‹ä¸€æ­¥å­¦ä»€ä¹ˆï¼Ÿ
**A**: æ¨èå­¦ä¹ è·¯å¾„ï¼š

**Level 1ï¼šæ‰©å±•OkHttpçŸ¥è¯†**
1. é˜…è¯»OkHttpçœŸå®æºç 
2. äº†è§£HTTP/2å’ŒQUIC
3. å­¦ä¹ TLS/SSL

**Level 2ï¼šç›¸å…³æ¡†æ¶**
1. Retrofitï¼ˆåŸºäºOkHttpï¼‰
2. Volleyï¼ˆå¦ä¸€ä¸ªHTTPåº“ï¼‰
3. HttpURLConnectionï¼ˆJDKè‡ªå¸¦ï¼‰

**Level 3ï¼šæ¡†æ¶è®¾è®¡**
1. å­¦ä¹ å…¶ä»–å¼€æºæ¡†æ¶
2. å­¦ä¹ æ¶æ„è®¾è®¡æ¨¡å¼
3. å°è¯•è®¾è®¡è‡ªå·±çš„æ¡†æ¶

---

### Q20: é‡åˆ°é—®é¢˜åº”è¯¥æ€ä¹ˆåŠï¼Ÿ
**A**: é—®é¢˜è§£å†³æµç¨‹ï¼š

**æ­¥éª¤1ï¼šæŸ¥é˜…æ–‡æ¡£**
1. æŸ¥çœ‹æ¨¡æ¿ä¸­çš„ã€å¸¸è§é”™è¯¯ã€‘
2. æŸ¥çœ‹ã€å¿«é€Ÿå‚è€ƒå¡ç‰‡ã€‘
3. æŸ¥çœ‹æœ¬FAQæ–‡æ¡£

**æ­¥éª¤2ï¼šæœç´¢ç­”æ¡ˆ**
1. Google: "OkHttp [å…³é”®è¯]"
2. Stack Overflow
3. GitHub Issues

**æ­¥éª¤3ï¼šè°ƒè¯•ä»£ç **
1. æ‰“å°æ—¥å¿—
2. ä½¿ç”¨æ–­ç‚¹è°ƒè¯•
3. å¯¹æ¯”ç¤ºä¾‹ä»£ç 

**æ­¥éª¤4ï¼šå¯¹æ¯”æºç **
1. æŸ¥çœ‹OkHttpçœŸå®æºç 
2. å¯¹æ¯”å®ç°å·®å¼‚
3. å­¦ä¹ æ­£ç¡®åšæ³•

---

## ğŸ’¬ å…¶ä»–é—®é¢˜

æœ‰å…¶ä»–é—®é¢˜ï¼ŸæŸ¥çœ‹ä»¥ä¸‹èµ„æºï¼š
- `å¿«é€Ÿå‚è€ƒå¡ç‰‡.md` - æ ¸å¿ƒçŸ¥è¯†é€ŸæŸ¥
- `å®æˆ˜ç»ƒä¹ é¢˜.md` - ç»ƒä¹ å’Œç­”æ¡ˆ
- `7å¤©å­¦ä¹ è·¯çº¿å›¾.md` - è¯¦ç»†å­¦ä¹ æŒ‡å¯¼
- æ¨¡æ¿ä¸­çš„ã€ç¼–å†™æç¤ºã€‘- æ¯ä¸ªç±»çš„è¯¦ç»†è¯´æ˜

**è¿˜æœ‰é—®é¢˜ï¼Ÿ**
1. ä»”ç»†é˜…è¯»æ¨¡æ¿æ³¨é‡Š
2. æŸ¥çœ‹ç›¸å…³ç¤ºä¾‹ä»£ç 
3. å¯¹æ¯”OkHttpçœŸå®æºç 

---

**ç¥å­¦ä¹ é¡ºåˆ©ï¼** ğŸ“

