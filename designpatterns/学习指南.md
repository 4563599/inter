# 设计模式学习指南

## 📚 已完成的设计模式

### 1. 责任链模式（Chain of Responsibility）
- 📄 **教程文档**：[责任链.md](责任链.md)
- 💻 **示例代码**：[chain/ChainExample.java](chain/com/inter/designpatterns/chain/ChainExample.java)
- 🎯 **核心思想**：多个处理者依次尝试处理请求，处理不了就传给下一个
- 🔥 **Android 应用**：
  - View 事件分发（最经典）
  - OkHttp 拦截器
  - WorkManager 工作链
  - 广播接收器优先级处理
  - 表单验证链

### 2. 观察者模式（Observer）
- 💻 **示例代码**：[observer/ObserverExample.java](observer/ObserverExample.java)
- 🎯 **核心思想**：一对多依赖关系，当一个对象状态改变时，所有依赖者都会收到通知
- 🔥 **Android 应用**：
  - LiveData
  - RxJava
  - EventBus
  - 按钮点击监听

### 3. 策略模式（Strategy）
- 💻 **示例代码**：[chain/StrategyExample.java](chain/StrategyExample.java)
- 🎯 **核心思想**：定义一系列算法，把它们封装起来，并且使它们可以互相替换
- 🔥 **Android 应用**：
  - 支付方式选择
  - 排序算法
  - 动画插值器

### 4. 原型模式（Prototype）⭐ 新增
- 📄 **教程文档**：[原型模式.md](原型模式.md)
- 💻 **示例代码**：[prototype/PrototypeExample.java](prototype/PrototypeExample.java)
- 📖 **快速入门**：[prototype/README.md](prototype/README.md)
- 🎯 **核心思想**：通过克隆现有对象来创建新对象，而不是通过 new
- 🔥 **Android 应用**：
  - Intent 克隆
  - Bitmap 复制
  - Bundle 克隆
  - 游戏对象批量创建
  - 配置对象复制
  - 编辑功能（克隆数据避免直接修改）

---

## 🎓 学习路线建议

### 第一阶段：理解概念（1-2天）
1. 阅读 `原型模式.md`，理解什么是原型模式
2. 了解浅克隆和深克隆的区别
3. 思考为什么要用原型模式

### 第二阶段：运行示例（1天）
1. 打开 `prototype/PrototypeExample.java`
2. 编译并运行代码
3. 观察浅克隆和深克隆的输出区别
4. 修改代码，尝试不同的场景

### 第三阶段：动手实践（2-3天）
1. 为 `Monster` 类添加新字段（如 `List<Skill>`）
2. 实现深克隆，确保所有字段都被正确复制
3. 创建自己的示例（如游戏角色、配置对象）

### 第四阶段：实际应用（持续）
1. 在实际项目中寻找可以使用原型模式的场景
2. 重构现有代码，使用原型模式优化
3. 结合其他设计模式使用

---

## 📖 学习顺序推荐

### 初学者路线
```
1. 观察者模式 (最简单，最常用)
   ↓
2. 策略模式 (简单易懂)
   ↓
3. 原型模式 (理解对象创建)
   ↓
4. 责任链模式 (理解事件分发)
```

### 进阶路线
```
1. 责任链模式 (理解 Android 事件分发)
   ↓
2. 原型模式 (优化对象创建)
   ↓
3. 观察者模式 (理解响应式编程)
   ↓
4. 策略模式 (灵活切换算法)
```

---

## 🚀 快速开始

### 编译运行原型模式示例

```bash
# 进入原型模式目录
cd c:\android\inter\inter\designpatterns\prototype

# 编译（指定 UTF-8 编码）
javac -encoding UTF-8 PrototypeExample.java

# 运行
java PrototypeExample
```

### 编译运行责任链模式示例

```bash
# 进入责任链模式目录
cd c:\android\inter\inter\designpatterns\chain\com\inter\designpatterns\chain

# 编译
javac -encoding UTF-8 ChainExample.java

# 运行
java com.inter.designpatterns.chain.ChainExample
```

---

## 💡 学习技巧

### 1. 理解而不是记忆
- ❌ 不要死记硬背代码
- ✅ 理解设计模式要解决的问题
- ✅ 理解设计模式的核心思想
- ✅ 知道什么时候该用什么模式

### 2. 动手实践
- ❌ 不要只看不写
- ✅ 运行示例代码
- ✅ 修改代码，观察变化
- ✅ 自己实现一个完整的例子

### 3. 结合实际
- ❌ 不要为了用设计模式而用
- ✅ 在实际项目中寻找应用场景
- ✅ 重构现有代码，体会设计模式的优势
- ✅ 阅读优秀开源项目的源码

### 4. 对比学习
- 对比不同设计模式的区别
- 对比浅克隆和深克隆的区别
- 对比使用设计模式前后的代码

---

## 📊 设计模式对比表

| 模式 | 类型 | 核心思想 | 使用场景 | 难度 |
|------|------|----------|----------|------|
| **观察者** | 行为型 | 一对多通知 | 事件监听、数据绑定 | ⭐⭐ |
| **策略** | 行为型 | 算法可替换 | 支付方式、排序算法 | ⭐⭐ |
| **原型** | 创建型 | 克隆对象 | 批量创建相似对象 | ⭐⭐⭐ |
| **责任链** | 行为型 | 链式处理 | 事件分发、拦截器 | ⭐⭐⭐⭐ |

---

## 🎯 学习目标检查清单

### 原型模式
- [ ] 能解释什么是原型模式
- [ ] 能说出浅克隆和深克隆的区别
- [ ] 能独立实现一个深克隆的类
- [ ] 知道原型模式的使用场景
- [ ] 能在实际项目中应用原型模式

### 责任链模式
- [ ] 能解释什么是责任链模式
- [ ] 理解 Android 的事件分发机制
- [ ] 能独立实现一个责任链
- [ ] 知道 OkHttp 拦截器的原理
- [ ] 能实现自定义的表单验证链

### 观察者模式
- [ ] 能解释什么是观察者模式
- [ ] 理解 LiveData 的原理
- [ ] 能独立实现一个观察者模式
- [ ] 知道什么时候该用观察者模式

### 策略模式
- [ ] 能解释什么是策略模式
- [ ] 能独立实现一个策略模式
- [ ] 知道策略模式和责任链的区别

---

## 📝 练习题

### 原型模式练习

#### 练习1：基础克隆
创建一个 `Book` 类，包含以下字段：
- `String title`（书名）
- `String author`（作者）
- `int price`（价格）

实现浅克隆，并测试。

#### 练习2：深克隆
为 `Book` 类添加一个 `Publisher publisher` 字段，实现深克隆。

#### 练习3：实际应用
创建一个游戏角色系统：
- `Character` 类：包含名称、等级、装备列表
- `Equipment` 类：包含名称、属性
- 实现深克隆，快速创建 100 个相似的角色

### 责任链模式练习

#### 练习1：日志过滤
实现一个日志过滤链：
- `DebugHandler`：处理 DEBUG 级别日志
- `InfoHandler`：处理 INFO 级别日志
- `ErrorHandler`：处理 ERROR 级别日志

#### 练习2：表单验证
实现一个注册表单验证链：
- 用户名：非空、长度 3-20、只包含字母数字
- 密码：非空、长度 6-20、包含数字和字母
- 邮箱：非空、格式正确

#### 练习3：自定义拦截器
模仿 OkHttp，实现一个简单的请求拦截器链。

---

## 🔗 相关资源

### 在线资源
- [菜鸟教程 - 设计模式](https://www.runoob.com/design-pattern/design-pattern-tutorial.html)
- [Refactoring.Guru - 设计模式](https://refactoringguru.cn/design-patterns)
- [Android 官方文档](https://developer.android.com/)

### 推荐书籍
- 《Head First 设计模式》（入门必读）
- 《设计模式：可复用面向对象软件的基础》（经典）
- 《Android 开发艺术探索》（Android 进阶）

### 开源项目
- [OkHttp](https://github.com/square/okhttp) - 学习拦截器链
- [Retrofit](https://github.com/square/retrofit) - 学习适配器模式
- [Glide](https://github.com/bumptech/glide) - 学习构建者模式

---

## 🎉 学习成果展示

当你完成以下任务时，说明你已经掌握了设计模式：

1. ✅ 能独立实现 4 种设计模式
2. ✅ 能解释每种模式的使用场景
3. ✅ 能在实际项目中应用设计模式
4. ✅ 能阅读并理解开源项目中的设计模式
5. ✅ 能重构现有代码，使用设计模式优化

---

## 📞 学习建议

### 遇到问题怎么办？

1. **查看文档**：先阅读 `.md` 文档，理解概念
2. **运行代码**：运行示例代码，观察输出
3. **调试代码**：使用 IDE 的调试功能，逐步执行
4. **修改代码**：尝试修改代码，观察变化
5. **搜索资料**：Google/百度搜索相关问题
6. **提问交流**：在技术社区提问（如 StackOverflow）

### 学习时间安排

- **每天 1-2 小时**：适合上班族
- **集中学习**：周末集中学习 4-6 小时
- **持续学习**：每天学习，坚持 1-2 周

### 学习效果检验

- 能用自己的话解释设计模式
- 能独立写出示例代码
- 能在实际项目中应用
- 能帮助别人理解设计模式

---

## 🎊 恭喜你！

如果你看到这里，说明你已经开始了设计模式的学习之旅！

记住：
- 设计模式不是银弹，不要滥用
- 理解比记忆更重要
- 实践是最好的学习方式
- 持续学习，不断进步

加油！💪

